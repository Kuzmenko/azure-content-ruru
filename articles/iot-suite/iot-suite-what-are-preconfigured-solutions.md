<properties
 pageTitle="Предварительно настроенные решения IoT Azure | Microsoft Azure"
 description="Описание предварительно настроенных решений IoT Azure и их архитектуры со ссылками на дополнительные ресурсы."
 services=""
 suite="iot-suite"
 documentationCenter=""
 authors="dominicbetts"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-suite"
 ms.devlang="na"
 ms.topic="get-started-article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="08/09/2016"
 ms.author="dobett"/>

# Что такое предварительно настроенные решения Azure IoT Suite?

Предварительно настроенные решения Azure IoT Suite — это реализация стандартных шаблонов IoT, которые вы можете развернуть в Azure с помощью своей подписки. Предварительно настроенные решения можно использовать:

- в качестве отправной точки для собственных решений IoT;
- для ознакомления с распространенными шаблонами, которые используются при проектировании и разработке решений IoT.

Каждое предварительно настроенное решение — это полная комплексная реализация, в которой для создания данных телеметрии используются виртуальные устройства.

Наряду с развертыванием и запуском решений в Azure можно загрузить полный исходный код, а затем настраивать и расширять решение в соответствии с конкретными требованиями IoT.

> [AZURE.NOTE] Чтобы развернуть одно из предварительно настроенных решений, посетите страницу [Microsoft Azure IoT Suite][lnk-azureiotsuite]. В [руководстве по началу работы с предварительно настроенными решениями IoT][lnk-getstarted-preconfigured] подробно описывается, как развернуть и запустить одно из таких решений.

В следующей таблице показано соответствие этих решений конкретным функциям IoT.

| Решение | Прием данных | Идентификация устройства | Команды и управление | Правила и действия | Прогнозная аналитика |
|------------------------|-----|-----|-----|-----|-----|
| [Удаленный мониторинг][lnk-getstarted-preconfigured] | Да | Да | Да | Да | — |
| [Прогнозное обслуживание][lnk-predictive-maintenance] | Да | Да | Да | Да | Да |

- *Прием данных*: прием данных в облако в нужном масштабе.
- *Удостоверение устройства*: управление уникальными идентификаторами всех подключенных устройств.
- *Команды и управление*: отправка сообщений на устройство из облака для выполнения определенных действий.
- *Правила и действия*: правила используются в серверной части решения для операций с определенными данными, отправляемыми с устройства в облако.
- *Прогнозная аналитика*: данные, отправляемые с устройства в облако, анализируются в серверной части решения, что позволяет предсказать время выполнения определенных действий. Пример — анализ данных телеметрии, поступающих от двигателя самолета, который позволяет определить время обслуживания двигателя.

## Обзор предварительно настроенного решения для удаленного мониторинга

В этой статье мы решили обсудить предварительно настроенное решение для удаленного мониторинга, чтобы проиллюстрировать основные элементы проектирования, используемые другими решениями.

На следующей схеме представлены основные элементы решения для удаленного мониторинга. Дополнительные сведения об этих элементах приведены в разделах ниже.

![Архитектура предварительно настроенного решения удаленного мониторинга][img-remote-monitoring-arch]

## Устройства

Когда вы развертываете предварительно настроенные решения удаленного мониторинга, для такого решения заранее подготавливаются четыре виртуальных устройства, которые имитируют устройство охлаждения. Эти виртуальные устройства имеют встроенную модель, которая передает сведения о температуре и влажности в виде данных телеметрии. Эти устройства включены, чтобы проиллюстрировать сквозной поток данных, проходящих через решение. Кроме того, это удобный источник данных телеметрии и целевой объект для команд, который могут использовать разработчики серверной части в качестве отправной точки при создании собственной реализации.

Когда устройство впервые подключается к центру IoT в рамках предварительно настроенного решения удаленного мониторинга, оно отправляет в центр IoT информационное сообщение. В сообщении содержится список команд, на которые устройство может отвечать. Эти команды представлены ниже.

- *Проверка связи с устройством* — устройство отвечает на эту команду подтверждением. Так вы можете убедиться, что устройство по-прежнему активно и находится в состоянии прослушивания.
- *Начать сбор данных телеметрии* — сообщает устройству о начале отправки данных телеметрии.
- *Завершить сбор данных телеметрии* — сообщает устройству о завершении отправки данных телеметрии.
- *Изменить заданную температуру* — контролирует имитированные данные телеметрии (значения температуры), отправляемые устройством. Эта команда используется при тестировании логики серверной части.
- *Диагностические данные телеметрии* — определяет, должно ли устройство отправить сведения о наружной температуре в качестве данных телеметрии.
- *Изменить состояние устройства* — задает свойство метаданных состояния устройства, о которых сообщает устройство. Эта команда используется при тестировании логики серверной части.

В решение можно добавить дополнительные виртуальные устройства, которые будут передавать аналогичные данные телеметрии и реагировать на одни и те же команды.

## Центр IoT

В этом предварительно настроенном решении экземпляр центра IoT соответствует *облачному шлюзу* в стандартной [архитектуре решения IoT][lnk-what-is-azure-iot].

Центр IoT получает данные телеметрии с устройства через одну конечную точку. Центр IoT также поддерживает отдельные конечные точки устройства, через которые каждое устройство может получать отправляемые ему команды.

Центр IoT предоставляет доступ к полученным данным телеметрии через конечную точку для чтения таких данных на стороне службы.

## Azure Stream Analytics

В предварительно настроенном решении используются три задания службы [Azure Stream Analytics][lnk-asa] \(ASA), которые фильтруют поток поступающих с устройств телеметрических данных.


- *Задание отправки сведений об устройстве*. Выводит данные в концентратор событий, который перенаправляет сообщения, связанные с регистрацией устройства (отправляются при первом подключении такого устройства или в ответ на команду **Изменить состояние устройства**), в реестр устройств решения (база данных DocumentDB).
- *Задание отправки данных телеметрии*. Отправляет все необработанные данные телеметрии в хранилище BLOB-объектов, где они автономно хранятся в неструктурированном виде, а также вычисляет значения сводных данных телеметрии, отображаемых на панели мониторинга решения.
- *Задание выполнения правил*. Отфильтровывает поток данных телеметрии, отсеивая значения, превышающие пороговые значения настроенных правил, а также выводит данные в концентратор событий. Когда правило выполняется, в представлении панели мониторинга на портале решения это событие отображается в виде новой строки в таблице журнала оповещений. Кроме того, запускается действие на основе параметров, определенных в представлениях "Правила" и "Действия" на портале решения.

В этом предварительно настроенном решении задания ASA образуют **серверную часть решения IoT** в стандартной [архитектуре решения IoT][lnk-what-is-azure-iot].

## Обработчик событий

В этом предварительно настроенном решении обработчик событий формирует **серверную часть решения IoT** в стандартной [архитектуре решения IoT][lnk-what-is-azure-iot].

**Задание отправки данных телеметрии** и **задание выполнения правил** отправляют свои выходные данные в концентраторы событий, чтобы эти данные перенаправлялись в другие службы серверной части. Для чтения сообщений из этих концентраторов событий в решении используется экземпляр [EventProcessorHost][lnk-event-processor], который выполняется в рамках [веб-задания][lnk-web-job]. **EventProcessorHost** использует данные **задания отправки данных телеметрии**, чтобы обновить данные устройства в базе данных DocumentDB, а также использует данные **задания выполнения правил**, чтобы вызвать приложение логики и обновить предупреждения, отображаемые на портале решения.

## Реестр удостоверений устройств и DocumentDB

Каждый центр IoT включает [реестр удостоверений устройств][lnk-identity-registry], в котором хранятся ключи устройств. Центр IoT использует эти сведения для проверки подлинности устройств: для подключения к концентратору устройство должно иметь действительный ключ и оно должно быть зарегистрированным.

Это решение содержит дополнительные сведения об устройствах, включая сведения о состоянии, поддерживаемых командах и другие метаданные. Для хранения собственных данных об этом устройстве решение использует базу данных DocumentDB. Портал решения извлекает данные из базы данных DocumentDB для отображения и редактирования.

Решение также должно обеспечивать синхронизацию данных в реестре удостоверений устройств с содержимым базы данных DocumentDB. Для управления синхронизацией экземпляр **EventProcessorHost** использует данные **задания отправки данных телеметрии** Stream Analytics.

## Портал решения

![Панель мониторинга решения][img-dashboard]

Портал решения представляет собой веб-интерфейс, разворачиваемый в облаке в составе предварительно настроенного решения. Он позволяет:

- просматривать данные телеметрии и историю оповещений на панели мониторинга;
- подготавливать новые устройства;
- осуществлять управление и мониторинг устройств;
- отправлять команды на определенные устройства;
- управлять правилами и действиями.

В этом предварительно настроенном решении портал представляет собой часть **серверного решения IoT**, а также часть системы, отвечающую за **обработку данных и подключение к устройствам организации**, в стандартной [архитектуре решения IoT][lnk-what-is-azure-iot].

## Дальнейшие действия

Дополнительные сведения об архитектурах решений IoT см. в документе [Эталонная архитектура служб IoT Microsoft Azure][lnk-refarch].

Теперь вы знаете, что такое предварительно настроенное решение, и можете приступить к развертыванию предварительно настроенного решения для *удаленного мониторинга*. См. статью [Начало работы с предварительно настроенными решениями][lnk-getstarted-preconfigured].

[img-remote-monitoring-arch]: ./media/iot-suite-what-are-preconfigured-solutions/remote-monitoring-arch1.png
[img-dashboard]: ./media/iot-suite-what-are-preconfigured-solutions/dashboard.png
[lnk-what-is-azure-iot]: iot-suite-what-is-azure-iot.md
[lnk-asa]: https://azure.microsoft.com/documentation/services/stream-analytics/
[lnk-event-processor]: ../event-hubs/event-hubs-programming-guide.md#event-processor-host
[lnk-web-job]: ../app-service-web/web-sites-create-web-jobs.md
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide.md#device-identity-registry
[lnk-predictive-maintenance]: iot-suite-predictive-overview.md
[lnk-azureiotsuite]: https://www.azureiotsuite.com/
[lnk-refarch]: http://download.microsoft.com/download/A/4/D/A4DAD253-BC21-41D3-B9D9-87D2AE6F0719/Microsoft_Azure_IoT_Reference_Architecture.pdf
[lnk-getstarted-preconfigured]: iot-suite-getstarted-preconfigured-solutions.md

<!----HONumber=AcomDC_0810_2016-->