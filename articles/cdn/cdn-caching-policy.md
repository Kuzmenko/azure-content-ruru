<properties
	pageTitle="Политика кэширования CDN в расширении служб мультимедиа"
	description="В этой статье приведен обзор политики кэширования сети CDN в расширении служб мультимедиа."
	services="media-services,cdn"
	documentationCenter=".NET"
	authors="juliako"
	manager="erikre"
	editor=""/>

<tags
	ms.service="media-services"
	ms.workload="tbd"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="09/19/2016"
	ms.author="juliako"/>
 
#Политика кэширования CDN в расширении служб мультимедиа

Службы мультимедиа Azure предоставляют адаптивную потоковую передачу и прогрессивное скачивание на основе протокола HTTP. Потоковая передача на основе протокола HTTP — это высокомасштабируемая технология, обладающая преимуществами кэширования на стороне прокси-сервера и на стороне клиента, а также преимуществами слоев CDN. Функция конечных точек потоковой передачи предоставляет общие возможности потоковой передачи, а также конфигурацию для заголовков кэша HTTP. Она также задает заголовки HTTP Cache-Control: max-age и Expires. Узнать больше о заголовках кэша HTTP можно на веб-сайте [W3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html).

##Заголовки кэша по умолчанию

Конечные точки потоковой передачи по умолчанию используют 3-дневные заголовки кэша для потоковой передачи данных по требованию (собственно мультимедийных фрагментов/блоков) и манифеста (списка воспроизведения). Для динамической потоковой передачи конечные точки потоковой передачи используют 3-дневные заголовки кэша для данных (собственно мультимедийных фрагментов/блоков) и 2-секундный заголовок для запросов манифеста (списка воспроизведения). При переключении динамической программы в программу по запросу (динамический архив) используются заголовки кэша потоковой передачи по запросу.

##Интеграция Azure CDN

Службы мультимедиа Azure обеспечивают [интегрированную сеть CDN](https://azure.microsoft.com/updates/azure-media-services-now-fully-integrated-with-azure-cdn/) для конечных точек потоковой передачи. Заголовки Cache-control применяются таким же образом, как и конечные точки потоковой передачи для таких же точек с поддержкой CDN. В сетях CDN Azure значения кэша, настроенные для конечных точек потоковой передачи, используются, чтобы определить жизненный цикл внутренне кэшированных объектов и задать заголовки кэша доставки. При использовании конечных точек потоковой передачи с поддержкой CDN не рекомендуется устанавливать небольшие значения кэша. Малые значения кэша снижают производительность и нивелируют преимущество CDN. Задать заголовки кэша менее 600 секунд для конечных точек потоковой передачи с поддержкой CDN невозможно.

>[AZURE.IMPORTANT] Интеграция служб мультимедиа Azure с Azure CDN реализуется на базе **Azure CDN от Verizon**. Если для служб мультимедиа Azure требуется использовать **Azure CDN от Akamai**, то необходимо [настроить конечную точку вручную](cdn-create-new-endpoint.md). Дополнительные сведения о компонентах Azure CDN см. в [обзоре CDN](cdn-overview.md).

##Настройка заголовков кэша с помощью служб мультимедиа Azure

Для настройки значений заголовков кэша можно использовать портал управления Azure или API-интерфейсы служб мультимедиа Azure.

1. Настройка заголовков кэша с помощью портала управления описывается в разделе «Настройка конечной точки потоковой передачи» статьи [Как управлять конечными точками потоковой передачи](../media-services/media-services-portal-manage-streaming-endpoints.md).
2. Интерфейс REST API служб мультимедиа Azure, [StreamingEndpoint](https://msdn.microsoft.com/library/azure/dn783468.aspx#StreamingEndpointCacheControl).
3. Пакет SDK для служб мультимедиа Azure для .NET, [свойства StreamingEndpointCacheControl](http://go.microsoft.com/fwlink/?LinkId=615302).

##Порядок приоритета конфигурации кэша

1. Настроенные значения кэша служб мультимедиа Azure переопределяют значение по умолчанию.
2. При отсутствии ручных настроек применяются значения по умолчанию.
3. По умолчанию для манифеста динамической потоковой передачи (списка воспроизведения) используются 2-секундные заголовки кэша независимо от конфигурации мультимедиа Azure или службы хранилища Azure, и переопределить это значение невозможно.

<!---HONumber=AcomDC_0921_2016-->