<properties 
	pageTitle="Настройка кодировщика FMLE для отправки односкоростного обновляющегося потока | Microsoft Azure" 
	description="В этой статье показано, как настроить кодировщик Flash Media Live Encoder (FMLE) для отправки односкоростного потока в каналы AMS, которые выполняют кодирование в реальном времени." 
	services="media-services" 
	documentationCenter="" 
	authors="Juliako" 
	manager="erikre" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="ne" 
	ms.topic="article" 
	ms.date="09/19/2016"
	ms.author="juliako;cenkdin;anilmur"/>

#Использование кодировщика FMLE для отправки односкоростного обновляющегося потока

> [AZURE.SELECTOR]
- [FMLE](media-services-configure-fmle-live-encoder.md)
- [Elemental Live](media-services-configure-elemental-live-encoder.md)
- [Tricaster](media-services-configure-tricaster-live-encoder.md)
- [Wirecast](media-services-configure-wirecast-live-encoder.md)

В этой статье показано, как настроить кодировщик [Flash Media Live Encoder](http://www.adobe.com/products/flash-media-encoder.html) (FMLE) для отправки односкоростного потока в каналы AMS, которые выполняют кодирование в реальном времени. Дополнительные сведения см. в разделе [Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure](media-services-manage-live-encoder-enabled-channels.md).

В этом учебнике показано, как управлять службами мультимедиа Azure (AMS) с помощью Обозревателя служб мультимедиа Azure. Это средство запускается только на компьютерах с ОС Windows. Если у вас Mac или Linux, воспользуйтесь классическим порталом Azure для создания [каналов](media-services-portal-creating-live-encoder-enabled-channel.md#create-a-channel) и [программ](media-services-portal-creating-live-encoder-enabled-channel.md#create-and-manage-a-program).

Обратите внимание, что в этом руководстве мы используем кодек AAC. Однако FMLE не поддерживает AAC по умолчанию. Для использования AAC необходимо приобрести подключаемый модуль, например, от MainConcept: [подключаемый модуль AAC](http://www.mainconcept.com/products/plug-ins/plug-ins-for-adobe/aac-encoder-fmle.html)

##Предварительные требования

- [Создание учетной записи служб мультимедиа Azure](media-services-create-account.md)
- Убедитесь, что запущена конечная точка потоковой трансляции как минимум с одной выделенной единицей потоковой трансляции. Дополнительные сведения см. в разделе [Управление конечными точками потоковой передачи в учетной записи служб мультимедиа](media-services-portal-manage-streaming-endpoints.md)
- Установите последнюю версию средства [AMSE](https://github.com/Azure/Azure-Media-Services-Explorer).
- Запустите его и подключитесь к учетной записи AMS.

##Советы

- По возможности используйте проводное подключение к Интернету.
- Для получения необходимой пропускной способности рекомендуется удвоить скорость потоковой передачи. Хотя это требование не является обязательным, оно поможет уменьшить влияние перегрузки сети на пропускную способность.
- При использовании программных кодировщиков закройте все ненужные программы.

## Создание канала

1.  В средстве AMSE перейдите на вкладку **Поток** и щелкните правой кнопкой мыши в области канала. Выберите **Создать канал...** в меню.

![FMLE](./media/media-services-fmle-live-encoder/media-services-fmle1.png)

2. Укажите имя канала, поле описания является необязательным. В разделе «Параметры каналов» для параметра «Кодирование в реальном времени» установите значение **Стандартное**, а для параметра «Входной протокол» — значение **RTMP**. Остальные параметры можно оставить без изменений.


Убедитесь, что флажок **Start the new channel now** (Сразу запустить новый канал) установлен.

3. Щелкните **Создать канал**. ![FMLE](./media/media-services-fmle-live-encoder/media-services-fmle2.png)

>[AZURE.NOTE] На запуск канала может потребоваться до 20 минут.


Во время запуска канала можно [настроить кодировщик](media-services-configure-fmle-live-encoder.md#configure_fmle_rtmp).

>[AZURE.IMPORTANT] Обратите внимание, что тарификация начинается сразу же после перехода канала в состояние готовности. Дополнительные сведения см. в разделе [Состояния канала](media-services-manage-live-encoder-enabled-channels.md#states).

##<a id=configure_fmle_rtmp></a>Настройка кодировщика FMLE

В этом руководстве используются следующие параметры вывода. В оставшейся части этого раздела этапы настройки описываются более подробно.

**Видео:**
 
- Кодек: H.264
- Профиль: High (уровень 4.0)
- Скорость: 5000 Кбит/с
- Опорный кадр: 2 секунды (60 секунд)
- Частота кадров: 30
 
**Звук:**

- Кодек: AAC (LC)
- Скорость: 192 Кбит/с
- Частота выборки: 44,1 кГц


###Этапы настройки

1. Перейдите к интерфейсу Flash Media Live Encoder (FMLE) на используемом компьютере.

	Интерфейс представляет собой одну главную страницу с параметрами. Пожалуйста, обратите внимание на следующие рекомендуемые параметры для потоковой передачи с FMLE.
	
	- Формат: H.264 Частота кадров: 30.00
	- Размер входного потока: 1280 x 720
	- Скорость: 5000 кбит/сек (это значение можно изменить в зависимости от ограничений сети)

	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle3.png)

	При использовании источников с чересстрочной разверткой установите флажок «Устранить чересстрочную развертку».

2. Выберите значок гаечного ключа рядом с полем «Формат», там должны быть установлены следующие дополнительные параметры:

	- Профиль: основной
	- Уровень: 4.0
	- Частота опорного кадра: 2 секунды
	
	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle4.png)

3. Установите следующие важные параметры звука:
	
	- Формат: AAC
	- Частота выборки: 44100 Гц
	- Скорость: 192 Кбит/с
	
	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle5.png)

6. Получите входной URL-адрес канала, чтобы назначить его **конечной точке RTMP** FMLE.
	
	Перейдите обратно в средство AMSE и проверьте состояние запуска канала. После изменения состояния с **Starting** (Запуск) на **Running** (Выполняется) вы сможете получить входной URL-адрес.
	  
	Когда канал запустится, щелкните правой кнопкой мыши имя канала, перейдите вниз к элементу **Скопировать входной URL-адрес в буфер обмена** и выберите **Основной входной URL-адрес**.
	
	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle6.png)

7. Вставьте этот адрес в поле **URL-адрес FMS** раздела выхода и укажите имя потока.

	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle7.png)

	Для обеспечения дополнительной надежности повторите эти действия с полем «Дополнительный входной URL-адрес».
8. Нажмите кнопку **Подключиться**.

>[AZURE.IMPORTANT] Перед нажатием кнопки **Подключиться** **обязательно** убедитесь в том, что канал находится в состоянии готовности. Кроме того, не оставляйте канал в состоянии готовности без входного потока более 15 минут.

##Проверка воспроизведения
  
1. Перейдите в средство AMSE и щелкните правой кнопкой мыши на канале, который необходимо проверить. В меню наведите указатель мыши на пункт **Playback the Preview** (Воспроизведение для предварительного просмотра) и выберите **with Azure Media Player** (с помощью мультимедиапроигрывателя Azure).

	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle8.png)

Если поток отображается в проигрывателе, то кодировщик правильно настроен для подключения к AMS.

При получении ошибки необходимо сбросить канал и настроить параметры кодировщика. Рекомендации см. в разделе [Устранение неполадок](media-services-troubleshooting-live-streaming.md).

##Создание программы

1. После проверки воспроизведения канала создайте программу. На вкладке **Live** (Передача) в инструменте AMSE щелкните правой кнопкой мыши в области программы и выберите **Create New Program** (Создать новую программу).

	![fmle](./media/media-services-fmle-live-encoder/media-services-fmle9.png)

2. Укажите имя программы и при необходимости измените параметр **Archive Window Length** (Длительность окна архивации) (по умолчанию она составляет 4 часа). Также можно указать расположение для хранения или оставить значение по умолчанию.
3. Установите флажок **Start the Program now** (Запустить программу сейчас).
4. Щелкните **Create Program** (Создать программу).
  
	Примечание. Создание программы занимает меньше времени, чем создание канала.
 
5. После запуска программы проверьте воспроизведение, щелкнув правой кнопкой мыши программу, перейдя к пункту **Playback the program(s)** (Воспроизвести программы) и выбрав **with Azure Media Player** (с помощью мультимедиапроигрывателя Azure).
6. После проверки снова щелкните правой кнопкой мыши на программе и выберите **Копировать выходной URL-адрес в буфер обмена** (или получите этот адрес с помощью пункта меню **Сведения о программе и параметры**).

Теперь поток можно внедрить в проигрыватель или транслировать аудитории для просмотра в режиме реального времени.


## Устранение неполадок

Рекомендации см. в разделе [Устранение неполадок](media-services-troubleshooting-live-streaming.md).


##Схемы обучения работе со службами мультимедиа

[AZURE.INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

##Отзывы

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

<!---HONumber=AcomDC_0921_2016-->