<properties 
	pageTitle="Настройка кодировщика Elemental Live для отправки односкоростного обновляющегося потока | Microsoft Azure" 
	description="В этой статье показано, как настроить кодировщик Elemental Live для отправки односкоростного потока в каналы AMS, которые выполняют кодирование в реальном времени." 
	services="media-services" 
	documentationCenter="" 
	authors="cenkdin" 
	manager="dwrede" 
	editor=""/>

<tags 
	ms.service="media-services" 
	ms.workload="media" 
	ms.tgt_pltfrm="na" 
	ms.devlang="ne" 
	ms.topic="article" 
	ms.date="09/19/2016"
	ms.author="cenkdin;anilmur;juliako"/>

#Использование кодировщика Elemental Live для отправки односкоростного обновляющегося потока

> [AZURE.SELECTOR]
- [Elemental Live](media-services-configure-elemental-live-encoder.md)
- [Tricaster](media-services-configure-tricaster-live-encoder.md)
- [Wirecast](media-services-configure-wirecast-live-encoder.md)
- [FMLE](media-services-configure-fmle-live-encoder.md)

В этой статье показано, как настроить кодировщик [Elemental Live](http://www.elementaltechnologies.com/products/elemental-live) для отправки односкоростного потока в каналы AMS, которые выполняют кодирование в реальном времени. Дополнительные сведения см. в разделе [Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure](media-services-manage-live-encoder-enabled-channels.md).

В этом учебнике показано, как управлять службами мультимедиа Azure (AMS) с помощью Обозревателя служб мультимедиа Azure. Это средство запускается только на компьютерах с ОС Windows. Если вы используете Mac или Linux, воспользуйтесь классическим порталом Azure для создания [каналов](media-services-portal-creating-live-encoder-enabled-channel.md#create-a-channel) и [программ](media-services-portal-creating-live-encoder-enabled-channel.md#create-and-manage-a-program).

##Предварительные требования

- Вы должны иметь практические знания по созданию событий в реальном времени с помощью веб-интерфейса Elemental Live.
- [Создание учетной записи служб мультимедиа Azure](media-services-create-account.md)
- Убедитесь, что запущена конечная точка потоковой трансляции как минимум с одной выделенной единицей потоковой трансляции. Дополнительные сведения см. в статье [Управление конечными точками потоковой передачи с помощью портала Azure](media-services-portal-manage-streaming-endpoints.md).
- Установите последнюю версию средства [AMSE](https://github.com/Azure/Azure-Media-Services-Explorer).
- Запустите его и подключитесь к учетной записи AMS.

##Советы

- По возможности используйте проводное подключение к Интернету.
- Для получения необходимой пропускной способности рекомендуется удвоить скорость потоковой передачи. Хотя это требование не является обязательным, оно поможет уменьшить влияние перегрузки сети на пропускную способность.
- При использовании программных кодировщиков закройте все ненужные программы.

## Использование Elemental Live с протоколом RTP

В этом разделе показано, как настроить кодировщик Elemental Live, который отправляет односкоростной обновляющийся поток по протоколу RTP. Дополнительные сведения см. в разделе [Отправка потока MPEG-TS по протоколу RTP](media-services-manage-live-encoder-enabled-channels.md#channel).

### Создание канала

1.  В средстве AMSE перейдите на вкладку **Поток** и щелкните правой кнопкой мыши в области канала. Выберите **Создать канал...** в меню.

![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental1.png)

2. Укажите имя канала, поле описания является необязательным. В разделе «Channel Settings» (Параметры каналов) для параметра «Live Encoding» (Кодирование в реальном времени) установите значение **Standard** (Стандартное), а для параметра «Input Protocol» (Входной протокол) — значение **RTP (MPEG-TS)**. Остальные параметры можно оставить без изменений.


Убедитесь, что флажок **Start the new channel now** (Сразу запустить новый канал) установлен.

3. Щелкните **Создать канал**. ![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental12.png)

>[AZURE.NOTE] На запуск канала может потребоваться до 20 минут.

Во время запуска канала можно [настроить кодировщик](media-services-configure-elemental-live-encoder.md#configure_elemental_rtp).

>[AZURE.IMPORTANT] Обратите внимание, что тарификация начинается сразу же после перехода канала в состояние готовности. Дополнительные сведения см. в разделе [Состояния канала](media-services-manage-live-encoder-enabled-channels.md#states).

###<a id=configure_elemental_rtp></a>Настройка кодировщика Elemental Live 

В этом руководстве используются следующие параметры вывода. В оставшейся части этого раздела этапы настройки описываются более подробно.

**Видео:**
 
- Кодек: H.264
- Профиль: High (уровень 4.0)
- Скорость: 5000 Кбит/с
- Опорный кадр: 2 секунды (60 секунд)
- Частота кадров: 30
 
**Звук:**

- Кодек: AAC (LC)
- Скорость: 192 Кбит/с
- Частота выборки: 44,1 кГц


####Этапы настройки

1. Перейдите в веб-интерфейс **Elemental Live** и настройте кодировщик для потоковой передачи **UDP/TS**.

2. После создания нового события прокрутите содержимое окна вниз к группам вывода и добавьте группу вывода **UDP/TS**.

3. Создайте новые выходные данные, выбрав **New Stream** (Новый поток) и щелкнув **Add Output** (Добавить выходные данные).
	
	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental13.png)
	
	>[AZURE.NOTE] Для события Elemental рекомендуется установить код времени в значение «Системные часы». Это позволит кодировщику выполнить повторное подключение в случае сбоя потока.

4. После создания выхода щелкните **Добавить поток**. Теперь можно настроить параметры выхода.
5. Прокрутите содержимое окна вниз до только что созданного потока «Stream 1». Щелкните вкладку **Video** (Видео) слева и разверните раздел **Advanced** (Дополнительные параметры).

	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental4.png)

	Хотя Elemental Live имеет широкий спектр доступных настроек, для потоковой передачи с AMS рекомендуются следующие параметры.
	
	- Разрешение: 1280 x 720
	- Частота кадров: 30
	- Размер GOP: 60 кадров
	- Режим развертки: прогрессивная
	- Скорость: 5000000 бит/сек (это значение можно изменить в зависимости от ограничений сети)
	

	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental5.png)

6. Получение входного URL-адреса канала
	
	Перейдите обратно в средство AMSE и проверьте состояние запуска канала. После изменения состояния с **Starting** (Запуск) на **Running** (Выполняется) вы сможете получить входной URL-адрес.
	  
	Когда канал запустится, щелкните правой кнопкой мыши имя канала, перейдите вниз к элементу **Скопировать входной URL-адрес в буфер обмена** и выберите **Основной входной URL-адрес**.
	
	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental6.png)
	
1. Вставьте этот адрес в поле **Основное назначение** Elemental. Все остальные параметры можно оставить без изменений.
	
	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental14.png)

	Для обеспечения дополнительной надежности повторите эти действия с полем «Дополнительный входной URL-адрес», создав отдельную вкладку «Выход» для потоковой передачи UDP/TS.
	
7. Щелкните **Create** (Создать) (если было создано новое событие) или **Update** (Обновить) (при изменении существующего события), затем перейдите к запуску кодировщика.

>[AZURE.IMPORTANT] Перед нажатием кнопки **Start** (Начать) в веб-интерфейсе Elemental Live **необходимо** убедиться, что канал находится в состоянии готовности. Кроме того, не оставляйте канал в состоянии готовности более 15 минут.

После отправки потока в течение 30 секунд, вернитесь к средству AMSE и проверьте воспроизведение.

###Проверка воспроизведения
  
1. Перейдите в средство AMSE и щелкните правой кнопкой мыши на канале, который необходимо проверить. В меню наведите указатель мыши на пункт **Playback the Preview** (Воспроизведение для предварительного просмотра) и выберите **with Azure Media Player** (с помощью мультимедиапроигрывателя Azure).

	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental8.png)

Если поток отображается в проигрывателе, то кодировщик правильно настроен для подключения к AMS.

При получении ошибки необходимо сбросить канал и настроить параметры кодировщика. Рекомендации см. в разделе [Устранение неполадок](media-services-troubleshooting-live-streaming.md).

###Создание программы

1. После проверки воспроизведения канала создайте программу. На вкладке **Live** (Передача) в инструменте AMSE щелкните правой кнопкой мыши в области программы и выберите **Create New Program** (Создать новую программу).

	![Elemental](./media/media-services-elemental-live-encoder/media-services-elemental9.png)

2. Укажите имя программы и при необходимости измените параметр **Archive Window Length** (Длительность окна архивации) (по умолчанию она составляет 4 часа). Также можно указать расположение для хранения или оставить значение по умолчанию.
3. Установите флажок **Start the Program now** (Запустить программу сейчас).
4. Щелкните **Create Program** (Создать программу).
  
	Примечание. Создание программы занимает меньше времени, чем создание канала.
 
5. После запуска программы проверьте воспроизведение, щелкнув правой кнопкой мыши программу, перейдя к пункту **Playback the program(s)** (Воспроизвести программы) и выбрав **with Azure Media Player** (с помощью мультимедиапроигрывателя Azure).
6. После проверки снова щелкните правой кнопкой мыши на программе и выберите **Копировать выходной URL-адрес в буфер обмена** (или получите этот адрес с помощью пункта меню **Сведения о программе и параметры**).

Теперь поток можно внедрить в проигрыватель или транслировать аудитории для просмотра в режиме реального времени.

## Устранение неполадок

Рекомендации см. в разделе [Устранение неполадок](media-services-troubleshooting-live-streaming.md).


##Схемы обучения работе со службами мультимедиа

[AZURE.INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

##Отзывы

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

<!---HONumber=AcomDC_0921_2016-->