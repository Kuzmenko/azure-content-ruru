<properties
pageTitle="Порты, используемые службой HDInsight | Azure"
description="Список портов, которые используются службами Hadoop, работающими в кластере HDInsight."
services="hdinsight"
documentationCenter=""
authors="Blackmist"
manager="jhubbard"
editor="cgronlun"/>

<tags
ms.service="hdinsight"
ms.devlang="na"
ms.topic="article"
ms.tgt_pltfrm="na"
ms.workload="big-data"
ms.date="09/13/2016"
ms.author="larryfr"/>

# Порты и универсальные коды ресурсов (URI), используемые кластерами HDInsight

В этом документе представлен список портов, которые используются службами Hadoop, работающими в кластерах HDInsight под управлением Linux. Кроме того, в статье содержатся сведения о портах, которые используются для подключения к кластеру с помощью протокола SSH.

## Общедоступные и необщедоступные порты

Кластеры HDInsight под управлением Linux предоставляют только три общедоступных порта: 22, 23 и 443. Они используются для безопасного доступа к кластеру с помощью протокола SSH и службам, предоставляемым через защищенный протокол HTTPS.

По сути, HDInsight реализуется несколькими виртуальными машинами Azure (узлами кластера), которые работают в виртуальной сети Azure. Из виртуальной сети вы можете получить доступ к портам, недоступным из Интернета. Например, подключившись к одному из головных узлов по протоколу SSH, вы можете получить прямой доступ к службам, работающим на узлах кластера.

> [AZURE.IMPORTANT] Вы сможете создать кластер HDInsight, если виртуальная сеть Azure не указана как параметр конфигурации. Однако к автоматически созданной виртуальной сети нельзя присоединить другие компьютеры (например, другие виртуальные машины Azure или клиентский компьютер для разработки).

Чтобы присоединить дополнительные компьютеры к виртуальной сети, необходимо сначала создать виртуальную сеть, а затем указать ее при создании кластера HDInsight. Дополнительные сведения см. в статье [Расширение возможностей HDInsight с помощью виртуальной сети Azure](hdinsight-extend-hadoop-virtual-network.md).

## Общедоступные порты

Все узлы в кластере HDInsight расположены в виртуальной сети Azure. Получить доступ к ним напрямую из Интернета невозможно. Общедоступный шлюз обеспечивает интернет-доступ к приведенным ниже портам. Они общие для всех типов кластеров HDInsight.

| служба | Порт | Протокол | Описание |
| ---- | ---------- | -------- | ----------- | ----------- |
| sshd | 22 | SSH | Подключает клиенты к sshd на основном головном узле. См. статью [Использование SSH с Hadoop на основе Linux в HDInsight из Windows](hdinsight-hadoop-linux-use-ssh-windows.md). |
| sshd | 22 | SSH | Подключение клиентов к SSHD на граничном узле (только HDInsight Premium). См. статью [Приступая к работе с R Server в HDInsight (предварительная версия)](hdinsight-hadoop-r-server-get-started.md). |
| sshd | 23 | SSH | Подключает клиенты к sshd на дополнительном головном узле. См. статью [Использование SSH с Hadoop на основе Linux в HDInsight из Windows](hdinsight-hadoop-linux-use-ssh-windows.md). |
| Ambari | 443 | HTTPS | Веб-интерфейс Ambari. См. статью [Управление кластерами HDInsight с помощью веб-интерфейса Ambari](hdinsight-hadoop-manage-ambari.md). |
| Ambari | 443 | HTTPS | REST API Ambari. См. статью [Управление кластерами HDInsight с помощью REST API Ambari](hdinsight-hadoop-manage-ambari-rest-api.md). |
| WebHCat | 443 | HTTPS | REST API HCatalog. См. статьи [Выполнение заданий Hive с помощью Curl с использованием Hadoop в HDInsight](hdinsight-hadoop-use-Pig-curl.md), [Выполнение заданий Pig с помощью Curl с использованием Hadoop в HDInsight](hdinsight-hadoop-use-Pig-curl.md) и [Выполнение заданий MapReduce с помощью Curl с использованием Hadoop в HDInsight](hdinsight-hadoop-use-mapreduce-curl.md). |
| HiveServer2 | 443 | ODBC | Подключение к Hive с помощью ODBC. См. статью [Подключение Excel к Hadoop с помощью драйвера Microsoft Hive ODBC](hdinsight-connect-excel-hive-odbc-driver.md). |
| HiveServer2 | 443 | JDBC | Подключение к Hive с помощью JDBC. См. статью [Подключение к Hive в Azure HDInsight с помощью драйвера Hive JDBC](hdinsight-connect-hive-jdbc-driver.md). |

Приведенные ниже сведения доступны для определенных типов кластеров.

| служба | Порт | Протокол |Тип кластера | Описание |
| ------------ | ---- |  ----------- | --- | ----------- |
| Stargate | 443 | HTTPS | HBase | REST API HBase. См. статью [Руководство по HBase. Приступая к работе с Apache HBase на Hadoop под управлением Linux в HDInsight](hdinsight-hbase-tutorial-get-started-linux.md). |
| Livy | 443 | HTTPS | Spark | Spark REST API. См. статью [Удаленная отправка заданий Spark в кластер Apache Spark в HDInsight на платформе Linux с помощью Livy](hdinsight-apache-spark-livy-rest-interface.md). |
| Storm | 443 | HTTPS | Storm | Веб-интерфейс Storm. См. статью [Развертывание топологий Apache Storm в HDInsight под управлением Linux и управление ими](hdinsight-storm-deploy-monitor-topology-linux.md).

### Аутентификация

Все общедоступные службы в Интернете должны проходить проверку подлинности.

| Порт | Учетные данные |
| ---- | ----------- |
| 22 или 23 | Учетные данные пользователя SSH, указанные при создании кластера. |
| 443 | Имя для входа (по умолчанию — admin) и пароль, указанные при создании кластера. |

## Необщедоступные порты

> [AZURE.NOTE] Некоторые службы доступны только в кластерах определенных типов. Например, служба HBase доступна только на кластерах типа HBase.

### Порты HDFS

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- | 
| Веб-интерфейс узла имен | Головные узлы | 30070 | HTTPS | Веб-интерфейс для просмотра текущего состояния |
| Служба метаданных на узле имен | Головные узлы | 8020 | IPC | Метаданные файловой системы 
| Узел данных | Все рабочие узлы | 30075 | HTTPS | Веб-интерфейс для просмотра состояния, журналов и т. д. |
| Узел данных | Все рабочие узлы | 30010 | &nbsp; | Передача данных |
| Узел данных | Все рабочие узлы | 30020 | IPC | Операции с метаданными |
| Дополнительный узел имен | Головные узлы | 50090 | HTTP | Контрольная точка для метаданных узла имен |

### Порты YARN

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| Веб-интерфейс для диспетчера Resource Manager | Головные узлы | 8088 | HTTP | Веб-интерфейс для диспетчера Resource Manager |
| Веб-интерфейс для диспетчера Resource Manager | Головные узлы | 8090 | HTTPS | Веб-интерфейс для диспетчера Resource Manager |
| Интерфейс администратора для Resource Manager | Головные узлы | 8141 | IPC | Для отправки приложений (Hive, Hive Server, Pig и т. д.) |
| Планировщик Resource Manager | Головные узлы | 8030 | HTTP | Интерфейс администратора |
| Интерфейс приложения Resource Manager | Головные узлы | 8050 | HTTP |Адрес интерфейса диспетчера приложений |
| Диспетчер узлов | Все рабочие узлы | 30050 | &nbsp; | Адрес диспетчера контейнеров |
| Веб-интерфейс диспетчера узлов | Все рабочие узлы | 30060 | HTTP | Интерфейс Resource Manager |
| Адрес временной шкалы | Головные узлы | 10200 | RPC | Служба RPC службы временной шкалы |
| Веб-интерфейс временной шкалы | Головные узлы | 8181 | HTTP | Веб-интерфейс службы временной шкалы |

### Порты Hive

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| HiveServer2 | Головные узлы | 10001 | Thrift | Служба для подключения к Hive программным способом (с помощью протокола Thrift или JDBC) |
| HiveServer | Головные узлы | 10 000 | Thrift | Служба для подключения к Hive программным способом (с помощью протокола Thrift или JDBC) |
| Метахранилище Hive | Головные узлы | 9083 | Thrift | Служба для подключения к метаданным Hive программным способом (с помощью протокола Thrift или JDBC) |

### Порты WebHCat

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| Сервер WebHCat | Головные узлы | 30111 | HTTP | Веб-API на базе HCatalog и других служб Hadoop |

### Порты MapReduce

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| Журнал заданий | Головные узлы | 19888 | HTTP | Веб-интерфейс журнала заданий MapReduce |
| Журнал заданий | Головные узлы | 10020 | &nbsp; | Сервер журнала заданий MapReduce |
| Обработчик перемещений | &nbsp; | 13562 | &nbsp; | Передача промежуточных выходных данных сопоставления в адрес запрашивающих редукторов |

### Oozie

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| Сервер Oozie | Головные узлы | 11000 | HTTP | URL-адрес службы Oozie |
| Сервер Oozie | Головные узлы | 11001 | HTTP | Порт для администрирования Oozie |

### Метрики Ambari

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| Временная шкала (журнал приложения) | Головные узлы | 6188 | HTTP | Веб-интерфейс службы временной шкалы |
| Временная шкала (журнал приложения) | Головные узлы | 30200 | RPC | Веб-интерфейс службы временной шкалы |

### Порты HBase

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| HMaster | Головные узлы | 16000 | &nbsp; | &nbsp; |
| Веб-интерфейс информационного сервера HMaster | Головные узлы | 16010 | HTTP | Порт для веб-интерфейса на главном узле HBase |
| Региональный сервер | Все рабочие узлы | 16020 | &nbsp; | &nbsp; |
| &nbsp; | &nbsp; | 2181 | &nbsp; | Порт, используемый клиентами для подключения к ZooKeeper |

### Порты Kafka

| служба | Узлы | Порт | Протокол | Описание |
| ------- | ------- | ---- | -------- | ----------- |
| Broker | Рабочие узлы | 9092 | [Сетевой протокол Kafka](http://kafka.apache.org/protocol.html) | Используется для связи с клиентами |
| &nbsp; | Узлы Zookeeper | 2181 | &nbsp; | Порт, используемый клиентами для подключения к ZooKeeper |

<!---HONumber=AcomDC_0921_2016-->