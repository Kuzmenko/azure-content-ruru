<properties
	pageTitle="Как использовать пакет SDK JavaScript для мобильных приложений Azure"
	description="Как использовать v для мобильных приложений Azure"
	services="app-service\mobile"
	documentationCenter="javascript"
	authors="adrianhall"
	manager="erikre"
	editor=""/>

<tags
	ms.service="app-service-mobile"
	ms.workload="mobile"
	ms.tgt_pltfrm="html"
	ms.devlang="javascript"
	ms.topic="article"
	ms.date="09/12/2016"
	ms.author="adrianha;ricksal"/>

# Как использовать клиентскую библиотеку JavaScript для мобильных приложений Azure

[AZURE.INCLUDE [app-service-mobile-selector-client-library](../../includes/app-service-mobile-selector-client-library.md)]

В этом руководстве показано, как реализовать типичные сценарии с использованием последней версии [пакета SDK JavaScript для мобильных приложений Azure]. Если вы не знакомы с мобильными приложениями Azure, сначала изучите статью [Быстрый запуск мобильного приложения Azure], чтобы создать серверную часть и таблицу. В этом руководстве мы рассмотрим использование мобильного внутреннего сервера в веб-приложениях HTML и JavaScript.

##<a name="Setup"></a>Настройка и необходимые компоненты

В данном руководстве предполагается, что вы уже создали серверную часть с таблицей. В этом руководстве предполагается, что в таблице используется та же схему, что и в таблицах, приведенных в этих учебниках.

Установить пакет SDK JavaScript для мобильных приложений Azure можно с помощью команды `npm`.

```
npm install azure-mobile-apps-client --save
```

После установки библиотека находится в `node_modules/azure-mobile-apps-client/dist/MobileServices.Web.min.js`. Скопируйте этот файл в свою область Интернета.

```
<script src="path/to/MobileServices.Web.min.js"></script>
```

Библиотеку также можно использовать как модуль ES2015 в средах CommonJS, таких как Browserify и Webpack, а также как библиотеку AMD. Например:

```
# For ECMAScript 5.1 CommonJS
var WindowsAzure = require('azure-mobile-apps-client');
# For ES2015 modules
import * as WindowsAzure from 'azure-mobile-apps-client';
```

[AZURE.INCLUDE [app-service-mobile-html-js-library](../../includes/app-service-mobile-html-js-library.md)]

##<a name="auth"></a>Практическое руководство. Проверка подлинности пользователей

Служба приложений Azure поддерживает аутентификацию и авторизацию пользователей с помощью различных внешних поставщиков удостоверений: Facebook, Google, учетная запись Майкрософт и Twitter. Можно задать разрешения таблиц, чтобы предоставить доступ к определенным операциям только пользователям, прошедшим проверку подлинности. Удостоверения пользователей, прошедших проверку подлинности, также можно применять для реализации правил авторизации в серверных скриптах. Дополнительные сведения см. в учебнике [Приступая к работе с проверкой подлинности].

Поддерживается два потока аутентификации: серверный и клиентский. Серверный поток обеспечивает самый простой способ проверки подлинности, так как он использует веб-интерфейс проверки подлинности. Клиентский поток обеспечивает более тесную интеграцию с возможностями устройства, такими как единый вход, так как использует пакеты SDK конкретного поставщика.

[AZURE.INCLUDE [app-service-mobile-html-js-auth-library](../../includes/app-service-mobile-html-js-auth-library.md)]

###<a name="configure-external-redirect-urls"></a>Практическое руководство. Настройка службы мобильных приложений для внешних URL-адресов перенаправления

Для обработки потоков пользовательского интерфейса OAuth некоторые типы приложений JavaScript используют функцию замыкания на себя. К этим возможностям относятся следующие:

* выполнение службы в локальной среде;
* использование динамической перезагрузки с платформой Ionic;
* перенаправление в службу приложений для аутентификации.

Выполнение в локальной среде может вызвать проблемы, так как по умолчанию аутентификация службы приложений настроена только для доступа из серверной части мобильного приложения. Следуйте инструкциям ниже, чтобы изменить параметры службы приложений для включения аутентификации при выполнении сервера в локальной среде.

1. Войдите на [портал Azure].
2. Перейдите к серверной части мобильного приложения.
3. В меню **Средства разработки** выберите **Обозреватель ресурсов**.
4. Щелкните **Перейти**, чтобы открыть обозреватель ресурсов для серверной части мобильного приложения в новой вкладке или окне.
5. Разверните узел **config** > **authsettings** для своего приложения.
6. Нажмите кнопку **Изменить**, чтобы включить режим редактирования ресурса.
7. Найдите элемент **allowedExternalRedirectUrls**, который должен иметь значение NULL. Измените его, как показано далее.

         "allowedExternalRedirectUrls": [
             "http://localhost:3000",
             "https://localhost:3000"
         ],

    Замените URL-адреса в массиве URL-адресами службы. В данном примере — это `http://localhost:3000` для локального примера службы Node.js. Можно также использовать адрес `http://localhost:4400` для службы Ripple или для других URL-адресов, в зависимости от настроек приложения.

8. В верхней части страницы щелкните **Чтение и запись**, затем щелкните **PUT**, чтобы сохранить изменения.

Вам также необходимо добавить URL-адреса замыкания на себя в настройках списка разрешений CORS.

1. Вернитесь на [портал Azure].
2. Перейдите к серверной части мобильного приложения.
3. В меню **API** щелкните **CORS**.
4. Введите каждый URL-адрес в пустое текстовое поле **Разрешенные источники**. Будет создано новое текстовое поле.
5. Щелкните **Сохранить**.
    
После обновления серверной части мобильного приложения вы сможете использовать новые URL-адреса замыкания на себя в приложении.

<!-- URLs. -->
[Быстрый запуск мобильного приложения Azure]: app-service-mobile-cordova-get-started.md
[Приступая к работе с проверкой подлинности]: app-service-mobile-cordova-get-started-users.md
[Добавление проверки подлинности в приложение]: app-service-mobile-cordova-get-started-users.md

[портал Azure]: https://portal.azure.com/
[пакета SDK JavaScript для мобильных приложений Azure]: https://www.npmjs.com/package/azure-mobile-apps-client
[документации по объектам запросов]: https://msdn.microsoft.com/ru-RU/library/azure/jj613353.aspx

<!---HONumber=AcomDC_0914_2016-->

