<properties 
	pageTitle="Основные сведения о мониторинге заданий в Stream Analytics | Microsoft Azure" 
	description="Основные сведения о мониторинге заданий в Stream Analytics" 
	keywords="монитор запросов"
	services="stream-analytics" 
	documentationCenter="" 
	authors="jeffstokes72" 
	manager="jhubbard" 
	editor="cgronlun"/>

<tags 
	ms.service="stream-analytics" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.tgt_pltfrm="na" 
	ms.workload="data-services" 
	ms.date="09/19/2016" 
	ms.author="jeffstok"/>

# Основные сведения о мониторинге заданий Stream Analytics и порядок мониторинга запросов

## Введение: страница мониторинга

И на портале управления Azure, и на портале Azure отображаются ключевые метрики производительности, которые можно использовать для мониторинга и устранения неполадок производительности запросов и заданий.

Чтобы просмотреть эти метрики, откройте на портале управления Azure вкладку **Монитор** выполняемого задания Stream Analytics. На странице «Монитор» метрики производительности отображаются с задержкой (не более одной минуты).

  ![Панель мониторинга заданий](./media/stream-analytics-monitoring/01-stream-analytics-monitoring.png)

На портале Azure перейдите к нужному заданию Stream Analytics и просмотрите раздел **Мониторинг**.

  ![Панель мониторинга заданий на портале Azure](./media/stream-analytics-monitoring/06-stream-analytics-monitoring.png)

Когда в регионе создается первое задание Stream Analytics, необходимо настроить диагностику для этого региона. Для этого щелкните в любом месте раздела **Мониторинг**, после чего появится колонка **Диагностика**. В ней можно включить диагностику и указать учетную запись хранения для мониторинга данных.

  ![Настройка диагностики запросов на портале Azure](./media/stream-analytics-monitoring/07-stream-analytics-monitoring.png)

## Метрики, доступные в Stream Analytics


| Метрика | Определение |
|--------|-------------|
| Использование единиц потоковой передачи (%) | Использование единиц потоковой передачи, назначенных заданию на вкладке «Масштаб» соответствующего задания. Как только этот индикатор достигнет 80 % и более существует высокая вероятность приостановки или отсрочки обработки события. |
| Входные события | Объем данных, получаемых заданием Stream Analytics, измеряемый количеством событий. Эти данные можно использовать, чтобы проверить, отправляются ли события в источник входных данных. |
| Выходные события | Объем данных, отправляемых заданием Stream Analytics в место назначения выходных данных, измеряемый количеством событий. |
| Неупорядоченные события | Количество событий, полученных в неактуальное время, которые были удалены или получили откорректированную метку времени в соответствии с политикой упорядочения событий. Эта метрика может зависеть от настройки параметра «Интервал для событий, полученных в неправильном порядке». |
| Ошибки преобразования данных | Количество ошибок преобразования данных, возникших в задании Stream Analytics. |
| Ошибки среды выполнения | Номер ошибок, возникающих при выполнении задания Stream Analytics. |
| События позднего ввода | Число событий, поздно поступающих из источника, которые либо были удалены, либо имеют измененные отметки времени (рассчитывается на основе конфигурации политики упорядочения событий для параметра «Интервал для событий, наступивших с задержкой»). |

## Настройка мониторинга на портале управления Azure ##

На диаграмме может отображаться не более 6 метрик.

Для переключения между относительными (только итоговые значения) и абсолютными (значения по оси Y) значениями метрики щелкните «Относительные» или «Абсолютные» вверху диаграммы.

  ![Выбор относительных или абсолютных значений в мониторе запросов](./media/stream-analytics-monitoring/02-stream-analytics-monitoring.png)

Метрики можно просмотреть на диаграмме «Монитор» в сводных данных за 1 час, 12 часов, 24 часа или 7 дней.

Чтобы изменить временной диапазон для отображения метрик на диаграмме, щелкните «1 час», «24 часа» или «7 дней» вверху диаграммы.

  ![Шкала времени в мониторе запросов](./media/stream-analytics-monitoring/03-stream-analytics-monitoring.png)

Вы можете настроить правила, согласно которым на электронную почту будут отправляться уведомления, когда задание превысит указанное пороговое значение.

## Настройка мониторинга на портале Azure ##

Вы можете изменить тип диаграммы, отображаемые метрики и временной диапазон на экране "Редактирование диаграммы". Подробные сведения см. в статье [Настройка мониторинга](../azure-portal/insights-how-to-customize-monitoring.md).

  ![Шкала времени в мониторе запросов на портале Azure](./media/stream-analytics-monitoring/08-stream-analytics-monitoring.png)

## Состояние задания

Состояние заданий Stream Analytics можно проверить в списке заданий на классическом портале Azure. Чтобы увидеть список заданий, щелкните значок Stream Analytics на классическом портале Azure.

| Состояние | Определение |
|--------|------------|
| Создано | Задание создано, но не запущено. |
| Starting | Пользователь инициировал запуск задания, выполняется запуск. |
| Выполнение | Задание выделено, входные данные обрабатываются или ожидают обработки. Если задание задерживается в состоянии выполнения и не выдает выходные данные, то, скорее всего, это обусловлено большим временным окном, выделенным на обработку данных, или сложностью логических операций в запросе. Другой причиной может быть то, что в настоящий момент задание не получает данных. |
| Остановка | Пользователь инициировал остановку задания, выполняется остановка. |
| Остановлено | Выполнение задания остановлено. |
| Деградация | Это состояние указывает на то, что при выполнении задания Stream Analytics возникли временные ошибки (например, ошибки ввода-вывода, обработки, преобразования данных и т. д.). Задание все еще выполняется, однако в процессе возникает много ошибок. Это задание требует внимания. Ошибки можно просмотреть в журналах операций. |
| Сбой | Состояние указывает на то, что из-за ошибок выполнить задание не удалось и его обработка остановлена. Клиенту необходимо изучить журналы операций для отладки ошибок. |
| Удаление | Означает, что задание удаляется. |

## Диагностика

На панели мониторинга на портале управления Azure отображаются сведения о том, где искать диагностические сведения — во входящих или исходящих данных либо в журнале операций. Щелкнув ссылку, вы перейдете в соответствующее расположение для просмотра диагностических сведений.

  ![Ошибки монитора запросов](./media/stream-analytics-monitoring/04-stream-analytics-monitoring.png)

Если щелкнуть входной или выходной ресурс, отобразятся подробные диагностические данные. Они обновляются по мере выполнения задания.

  ![Диагностика запросов](./media/stream-analytics-monitoring/05-stream-analytics-monitoring.png)

## Получение справки
Дополнительную помощь и поддержку вы можете получить на нашем [форуме Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/ru-RU/home?forum=AzureStreamAnalytics).

## Дальнейшие действия

- [Введение в Azure Stream Analytics](stream-analytics-introduction.md)
- [Приступая к работе с Azure Stream Analytics](stream-analytics-get-started.md)
- [Масштабирование заданий в службе Azure Stream Analytics](stream-analytics-scale-jobs.md)
- [Справочник по языку запросов Azure Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx)
- [Справочник по API-интерфейсу REST управления Stream Analytics](https://msdn.microsoft.com/library/azure/dn835031.aspx)

<!---HONumber=AcomDC_0921_2016-->