<properties
 pageTitle="Включение управляемых устройств за шлюзом IoT | Microsoft Azure"
 description="Раздел руководства с использованием шлюза IoT, созданного с помощью пакета SDK для шлюза, а также устройств, управляемых центром IoT."
 services="iot-hub"
 documentationCenter=""
 authors="chipalost"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="na"
 ms.topic="article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="04/29/2016"
 ms.author="cstreet"/>
 
# Включение управляемых устройств за шлюзом IoT

## Изоляция основного устройства

Организации часто используют шлюзы IoT для повышения общей безопасности своих решений IoT. Некоторые устройства должны отправлять данные в облако, но не могут защититься от угроз в Интернете. Для защиты от внешних угроз такие устройства должны взаимодействовать с внешним миром через шлюз.

Шлюз располагается на границе между безопасной средой и открытым Интернетом. Устройства обращаются к шлюзу, а тот передает сообщения в соответствующее место назначения в облаке. Шлюз защищен от внешних угроз, блокирует неавторизованные запросы, пропускает авторизованный входящий трафик и переадресует его на правильное устройство.

![][1]

За шлюзом можно также размещать устройства, которые могут себя защитить, чтобы обеспечить дополнительный уровень защиты. В этом сценарии вместо обновления операционной системы на каждом устройстве нужно установить в операционной системе шлюза только исправления, необходимые для защиты от новых уязвимостей.

## Изоляция плюс аналитика

Для простой изоляции устройств достаточно усиленного маршрутизатора. В то же время решениям IoT часто требуется шлюз с более широкими возможностями, чем простая изоляция устройств. Например, вам может потребоваться управление устройствами из облака. Для управления облаком в решении можно использовать LWM2M — стандартный протокол управления устройствами. При этом устройства могут отправлять данные телеметрии по протоколу без поддержки TCP/IP. Кроме того, устройства выдают большой объем данных, а передавать должны отфильтрованное подмножество данных телеметрии. Для этого можно собрать решение с использованием шлюза IoT, способного работать с двумя отдельными потоками данных. Такой шлюз должен:

-   понимать данные **телеметрии**, фильтровать их, а затем отправлять в облако через шлюз. Шлюз больше не является простым маршрутизатором, способным только пересылать данные между устройством и облаком.

-   Осуществлять простой обмен **данными по управлению устройствами LWM2M** между устройствами и облаком. Шлюз не обязан понимать поступающие данные и должен только обеспечивать прохождение данных между устройствами и облаком.

Этот сценарий показан на следующей схеме:

![][2]

## Решение: управление устройствами в IoT Azure и пакет SDK для шлюза 

Это сценарий активируют общедоступная предварительная версия [управления устройствами в IoT Azure][lnk-device-management] и бета-версия [пакета SDK для шлюза IoT Azure]. Шлюз обрабатывает каждый поток данных следующим образом.

-   **Данные телеметрии**: пакет SDK для шлюза можно использовать для создания конвейера, который понимает, фильтрует и отправляет данные телеметрии в облако. Пакет SDK для шлюза предоставляет код, реализующий компоненты этого конвейера от имени разработчика. Дополнительные сведения об архитектуре пакета SDK см. в учебнике [IoT Gateway SDK - Get Started][lnk-gateway-get-started] \(Пакет SDK для шлюза IoT: приступая к работе).

-   **Управление устройствами**: функция управления устройствами Azure предоставляет клиент LWM2M, выполняемый на устройстве, а также облачный интерфейс для передачи команд управления на устройство.
    
    Использовать специальную логику в шлюзе не требуется, поскольку ему не нужно обрабатывать данные LWM2M, пересылаемые между устройством и центром IoT. Для поддержки обмена данными LWM2M можно включить в шлюзе общий доступ к Интернету — эту функцию поддерживают многие современные операционные системы. Пакет SDK поддерживает разные операционные системы, а значит, вы можете выбрать ту, что подходит для данного сценария. Ниже представлены инструкции по включению общего доступа к Интернету в [Windows 10] и [Ubuntu] — двух из множества поддерживаемых операционных систем.

На следующей схеме показана архитектура высокого уровня, которая используется для включения данного сценария с использованием [управления устройствами Azure IoT][lnk-device-management] и [пакета SDK для IoT Azure].

![][3]

## Дальнейшие действия

Информацию об использовании пакета SDK для шлюза см. в следующих учебниках:

- [IoT Gateway SDK - Get started using Linux][lnk-gateway-get-started] \(Пакет SDK для шлюза IoT: приступая к работе с Linux)
- [IoT Gateway SDK – send device-to-cloud messages with a simulated device using Linux][lnk-gateway-simulated] \(Пакет SDK для шлюза IoT: отправка сообщений с устройства в облако через виртуальное устройство с помощью Linux)

Дополнительные сведения об управлении устройствами с помощью центра IoT см. в статье [Знакомство с клиентской библиотекой управления устройствами для центра Azure IoT.][lnk-library-c].

Для дальнейшего изучения возможностей центра IoT см. следующие статьи:

- [Разработка решения][lnk-design]
- [Руководство разработчика по центру Azure IoT (IoT — Интернет вещей)][lnk-devguide]
- [Пакет SDK для шлюза IoT (бета-версия): отправка сообщений с устройства в облако через виртуальное устройство с помощью Linux][lnk-gateway]
- [Управление центрами IoT через портал Azure][lnk-portal]

<!-- Images and links -->
[1]: media/iot-hub-gateway-device-management/overview.png
[2]: media/iot-hub-gateway-device-management/manage.png
[пакета SDK для IoT Azure]: https://github.com/Azure/azure-iot-gateway-sdk/
[пакета SDK для шлюза IoT Azure]: https://github.com/Azure/azure-iot-gateway-sdk/
[Windows 10]: http://windows.microsoft.com/ru-RU/windows/using-internet-connection-sharing#1TC=windows-7
[Ubuntu]: https://help.ubuntu.com/community/Internet/ConnectionSharing
[3]: media/iot-hub-gateway-device-management/manage_2.png
[lnk-gateway-get-started]: iot-hub-linux-gateway-sdk-get-started.md
[lnk-gateway-simulated]: iot-hub-linux-gateway-sdk-simulated-device.md
[lnk-device-management]: iot-hub-device-management-overview.md

[lnk-tutorial-twin]: iot-hub-device-management-device-twin.md
[lnk-tutorial-queries]: iot-hub-device-management-device-query.md
[lnk-tutorial-jobs]: iot-hub-device-management-device-jobs.md
[lnk-dm-gateway]: iot-hub-gateway-device-management.md
[lnk-library-c]: iot-hub-device-management-library.md

[lnk-design]: iot-hub-guidance.md
[lnk-devguide]: iot-hub-devguide.md
[lnk-gateway]: iot-hub-linux-gateway-sdk-simulated-device.md
[lnk-portal]: iot-hub-manage-through-portal.md

<!---HONumber=AcomDC_0713_2016-->