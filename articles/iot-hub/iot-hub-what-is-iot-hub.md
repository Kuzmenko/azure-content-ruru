<properties
 pageTitle="Обзор центра IoT Azure | Microsoft Azure"
 description="Обзор службы центра IoT Azure: центр IoT, подключение устройств, модели обмена данными Интернета вещей, включая обмен данными с использованием службы."
 services="iot-hub"
 documentationCenter=""
 authors="dominicbetts"
 manager="timlt"
 editor=""/>

<tags
 ms.service="iot-hub"
 ms.devlang="na"
 ms.topic="get-started-article"
 ms.tgt_pltfrm="na"
 ms.workload="na"
 ms.date="08/25/2016"
 ms.author="dobett"/>

# Что такое центр IoT в Azure?

Добро пожаловать в центр IoT Azure. В этой статье представлен обзор центра IoT Azure и содержатся сведения о том, как вам может пригодиться эта служба при внедрении решения Интернета вещей (IoT).

Центр IoT Azure — это полностью управляемая служба, которая обеспечивает надежный и защищенный двунаправленный обмен данными между миллионами устройств IoT и серверной частью решения. Центр IoT Azure обеспечивает:

- глобальный надежный обмен сообщениями между облаком и устройством в обоих направлениях;
- безопасную связь — используются учетные данные безопасности, уникальные для каждого устройства, и контроль доступа;
- комплексный мониторинг взаимодействия, а также событий управления идентификацией устройств;
- простое подключение устройств, так как используются библиотеки устройств для большинства популярных языков и платформ.

В статье [Сравнение центра IoT и концентраторов событий][lnk-compare] описываются ключевые различия между двумя этими службами и выделяются преимущества использования центра IoT в решениях IoT.

![Использование центра IoT Azure в качестве облачного шлюза для решения IoT][img-architecture]

> [AZURE.NOTE] Подробное рассмотрение архитектуры IoT см. в документе [Microsoft Azure IoT Reference Architecture][lnk-refarch] \(Эталонная архитектура Microsoft Azure IoT).

## Трудности, связанные с взаимодействием устройств IoT

Центр IoT и библиотеки позволяют обеспечить надежное и безопасное подключение устройств к серверной части решения. Устройства IoT:

- часто представляют собой встраиваемые системы, у которых отсутствует оператор;
- могут располагаться в удаленных расположениях, получить физический доступ к которым дорого;
- могут быть доступны только через серверную часть решения;
- могут иметь ограниченную мощность и (или) объем ресурсов для обработки;
- могут иметь временное, медленное или дорогостоящее подключение к сети;
- могут требовать использования закрытых, пользовательских или отраслевых протоколов приложения;
- могут создаваться с помощью большого числа популярных аппаратных и программных платформ.

В дополнение к изложенным выше требованиям любое решение IoT также должно быть масштабируемым, безопасным и надежным. В итоге формируется набор требований к подключению, выполнить которые с помощью традиционных технологий, таких как веб-контейнеры и брокеры сообщений, очень трудно.

## Почему нужно использовать центр IoT Azure

Центр IoT Azure учитывает сложности, связанные с подключением устройств, в следующих аспектах.

-   **Проверка подлинности для каждого устройства и безопасное подключение**. Вы можете подготовить для каждого устройства собственный [ключ безопасности][lnk-devguide-security], используемый для подключения к центру IoT. [Реестр удостоверений центра IoT][lnk-devguide-identityregistry] хранит удостоверения устройств и ключи в решении. Серверная часть решения приложения может добавлять отдельные устройства в список разрешений или запрещающий список, тем самым полностью контролируя доступ к устройствам.

-   **Мониторинг операций подключения устройств**. Вы можете получать подробные журналы операций управления идентификацией устройств и событий подключения устройства. С помощью этой возможности мониторинга решение IoT сможет выявлять проблемы подключения, например случаи, когда устройство пытается установить подключение, используя неверные учетные данные, отправляет сообщения слишком часто или отклоняет все сообщения, отправленные из облака на устройство.

-   **Обширный набор библиотек устройств**. Доступные [пакеты SDK для устройств IoT Azure][lnk-device-sdks] предусматривают поддержку разных языков и платформ, включая многие дистрибутивы Linux, Windows и операционных систем реального времени. Кроме того, пакеты SDK для устройств IoT Azure поддерживают управляемые языки, такие как C#, Java и JavaScript.

-   **Протоколы IoT и расширяемость**. Если в вашем решении нельзя использовать библиотеки устройств, центр IoT Azure предоставляет открытый протокол, который позволяет устройствам использовать протоколы MQTT 3.1.1, HTTP 1.1 и AMQP 1.0. Кроме того, в центре IoT можно настроить поддержку пользовательских протоколов. Для этого нужно:

    - создать полевой шлюз с помощью [пакета SDK шлюза Azure IoT][lnk-gateway-sdk], который преобразует пользовательский протокол в один из трех протоколов, поддерживаемых центром IoT.
    - настроить [шлюз протокола Azure IoT][protocol-gateway] \(компонент с открытым исходным кодом, который выполняется в облаке).

-   **Масштабирование.** Центр IoT Azure масштабируется до нескольких миллионов одновременно подключенных устройств и нескольких миллионов событий в секунду.

Эти преимущества являются общими для многих шаблонов взаимодействия. В настоящее время центр IoT позволяет реализовать следующие шаблоны взаимодействия.

-   **Прием данных от устройств в облако на основе событий.** Центр IoT может надежно получать миллионы событий в секунду от ваших устройств. Затем он может обработать их с помощью модуля обработчика событий "горячего" анализа. Кроме того, он может сохранить их для "холодного" анализа. Центр IoT сохраняет данные о событиях до семи дней, что позволяет гарантировать надежную обработку и смягчить пиковые нагрузки.

-   **Надежный обмен сообщениями (или *командами*) с облака на устройство.** Серверная часть решения может использовать центр IoT, чтобы отправлять на отдельные устройства сообщения, доставка которых гарантируется хотя бы один раз. Каждое сообщение имеет собственное время жизни, и серверная часть может запрашивать уведомления как о доставке, так и об истечении срока действия. Это позволяет полностью проследить жизненный цикл сообщения, отправляемого из облака в устройство. Затем вы можете реализовать бизнес-логику, которая включает в себя операции, выполняемые на устройствах.

-   **Отправка файлов и кэшированных данных от датчиков в облако.** Устройства могут отправлять файлы в службу хранилища Azure с использованием универсальных кодов ресурсов (URI) SAS, которыми автоматически управляет центр IoT. Центр IoT может создавать уведомления при поступлении файлов в облако, чтобы включить их обработку в серверной части.

## Шлюзы

Шлюз в решении IoT обычно является [шлюзом протокола][lnk-gateway], развернутым в облаке, или [шлюзом поля][lnk-field-gateway], развернутым локально с устройствами. Шлюз протокола выполняет преобразование протоколов, например MQTT в AMQP. Полевой шлюз может выполнять аналитику на границе, принимать срочные решения, позволяющие уменьшить задержку, предоставлять службы управления устройствами, применять ограничения для безопасности и конфиденциальности, а также преобразовывать протоколы. Оба типа шлюза выступают в качестве посредников между устройствами и центром IoT.

Полевой шлюз отличается от обычного маршрутизатора трафика (например, устройства преобразования сетевых адресов или брандмауэра) тем, что ему отведена активная роль в управлении доступом и потоком информации в решении.

Решение может включать в себя шлюзы протоколов и полевые шлюзы.

## Принципы работы центра IoT

Центр IoT Azure реализует шаблон [взаимодействия с поддержкой службы][lnk-service-assisted-pattern], чтобы выступать в качестве посредника во взаимодействии между устройствами и серверной частью решения. Задача взаимодействия с поддержкой службы заключается в установлении путей доверенного двунаправленного взаимодействия между системой управления, такой как центр IoT, и специализированными устройствами, которые разворачиваются в недоверенном физическом пространстве. Данный шаблон устанавливает следующие принципы.

- Безопасность имеет приоритет над всеми другими возможностями.
- Устройства не принимают сетевой информации, которую они не запрашивали. Устройство устанавливает все подключения и маршруты только в исходящем режиме. Чтобы устройство получило команду от серверной части, оно должно регулярно инициировать подключение для проверки любых команд, ожидающих обработки.
- Устройства должны подключаться и устанавливать маршруты только с общеизвестными службами, которые являются их партнерами, такими как центр IoT.
- Пути взаимодействия между устройством и службой и устройством и шлюзом защищены на уровне протокола приложения.
- Авторизация и проверка подлинности системного уровня основаны на удостоверениях устройств. Они позволяют практически мгновенно отзывать учетные данные и разрешения для доступа.
- Двунаправленное взаимодействие для устройств, которые подключаются нерегулярно из-за проблем с питанием или подключением, упрощается путем хранения команд и уведомлений для устройства до того момента, пока оно не подключится для их получения. Центр IoT хранит отправляемые команды в соответствующих очередях для каждого устройства.
- Полезные данные приложения можно защитить отдельно для безопасной передачи через шлюзы к конкретной службе.

Шаблон взаимодействия с поддержкой службы используется в мобильных устройствах для реализации служб push-уведомлений, таких как [службы push-уведомлений Windows][lnk-wns], [Google Cloud Messaging][lnk-google-messaging] и [Служба push-уведомлений Apple][lnk-apple-push].

## Дальнейшие действия

Сведения о стандартизированном управлении устройствами IoT для удаленного администрирования, настройки и обновления устройств в центре IoT Azure см. в статье [Общие сведения об управлении устройствами с помощью центра IoT Azure (предварительная версия)][lnk-device-management].

Вы можете внедрить клиентские приложения на широком спектре аппаратных платформ и операционных систем с помощью пакетов SDK для устройств IoT. Пакеты SDK для устройств IoT включают библиотеки, упрощающие отправку телеметрии в центр IoT и получение команд "из облака на устройство". При использовании этих пакетов SDK для устройств IoT для взаимодействия с центром IoT доступен выбор из нескольких сетевых протоколов. Дополнительные сведения см. в разделе [Сведения о пакетах SDK для устройств][lnk-device-sdks].

Чтобы приступить к работе, написав код и выполнив несколько примеров, см. руководство [Приступая к работе с центром Azure IoT с использованием .NET][lnk-get-started].

[img-architecture]: media/iot-hub-what-is-iot-hub/hubarchitecture.png


[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[lnk-connect-device]: https://azure.microsoft.com/develop/iot/
[lnk-d2c]: iot-hub-csharp-csharp-process-d2c.md
[protocol-gateway]: https://github.com/Azure/azure-iot-protocol-gateway/blob/master/README.md
[lnk-service-assisted-pattern]: http://blogs.msdn.com/b/clemensv/archive/2014/02/10/service-assisted-communication-for-connected-devices.aspx "Взаимодействие с поддержкой службы, запись в блоге Клеменса Вастерса (Clemens Vasters)"
[lnk-compare]: iot-hub-compare-event-hubs.md
[lnk-gateway]: iot-hub-protocol-gateway.md
[lnk-field-gateway]: iot-hub-guidance.md#field-gateways
[lnk-devguide-identityregistry]: iot-hub-devguide.md#identityregistry
[lnk-devguide-security]: iot-hub-devguide.md#security
[lnk-wns]: https://msdn.microsoft.com/library/windows/apps/mt187203.aspx
[lnk-google-messaging]: https://developers.google.com/cloud-messaging/
[lnk-apple-push]: https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9
[lnk-device-sdks]: https://github.com/Azure/azure-iot-sdks
[lnk-refarch]: http://download.microsoft.com/download/A/4/D/A4DAD253-BC21-41D3-B9D9-87D2AE6F0719/Microsoft_Azure_IoT_Reference_Architecture.pdf
[lnk-gateway-sdk]: https://github.com/Azure/azure-iot-gateway-sdk
[lnk-device-management]: iot-hub-device-management-overview.md

<!---HONumber=AcomDC_0831_2016-->