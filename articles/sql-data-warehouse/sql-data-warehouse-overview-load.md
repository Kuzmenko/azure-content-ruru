   <properties
   pageTitle="Загрузка данных в хранилище данных Azure SQL | Microsoft Azure"
   description="Распространенные сценарии загрузки данных в хранилище данных SQL. Они включают использование PolyBase, хранилища BLOB-объектов Azure, неструктурированных файлов и доставки диска. Кроме того, можно использовать сторонние средства."
   services="sql-data-warehouse"
   documentationCenter="NA"
   authors="lodipalm"
   manager="barbkess"
   editor=""/>

<tags
   ms.service="sql-data-warehouse"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services"
   ms.date="07/12/2016"
   ms.author="lodipalm;barbkess;sonyama"/>

# Загрузка данных в хранилище данных Azure SQL

Сводка параметров сценария и рекомендаций по загрузке данных в хранилище данных SQL.

Обычно самая сложная часть загрузки — это подготовка данных для загрузки. Azure упрощает загрузку за счет использования хранилища BLOB-объектов Azure как общего хранилища данных для многих служб и фабрики данных Azure для управления взаимодействием и перемещениям данных между службами Azure. Эти процессы интегрированы в технологию PolyBase, которая загружает данные из хранилища BLOB-объектов Azure в хранилище данных SQL с массовой параллельной обработкой (MPP).

Список учебников, загружающих примеры баз данных, см. в статье о [загрузке примеров баз данных][].

## Загрузка из хранилища BLOB-объектов Azure
Самый быстрый способ импорта данных в хранилище данных SQL — это использование PolyBase для загрузки данных из хранилища BLOB-объектов Azure. PolyBase использует структуру массовой параллельной обработки (MPP) в хранилище данных SQL для параллельной загрузки данных из хранилища BLOB-объектов Azure. Для работы с PolyBase можно использовать команды T-SQL или конвейер фабрики данных Azure.

### 1\. Использование PolyBase и T-SQL

Процесс загрузки:

2. Отформатируйте данные в формате UTF-8, поскольку в настоящее время PolyBase не поддерживает формат UTF-16.
2. Перенесите данные в хранилище BLOB-объектов Azure и сохраните их в виде текстовых файлов.
3. Настройте внешние объекты в хранилище данных SQL, определив расположение и формат данных.
4. Выполните команду T-SQL для параллельной загрузки данных в новую таблицу баз данных.

<!-- 5. Schedule and run a loading job. --> 

Инструкции см. в статье [Загрузка данных из хранилища BLOB-объектов Azure в хранилище данных SQL (PolyBase)][].

### 2\. Использование фабрики данных Azure

Чтобы упростить работу с PolyBase, можно создать конвейер фабрики данных Azure, использующий PolyBase для загрузки данных из хранилища BLOB-объектов Azure в хранилище данных SQL. Он настраивается быстро, поскольку не требует определения команд T-SQL. Если требуется только запрос внешних данных без импорта, используйте T-SQL.

Процесс загрузки:

2. Отформатируйте данные в формате UTF-8, поскольку в настоящее время PolyBase не поддерживает формат UTF-16.
2. Перенесите данные в хранилище BLOB-объектов Azure и сохраните их в виде текстовых файлов.
3. Создайте конвейер фабрики данных Azure для приема данных. Используйте параметр PolyBase.
4. Спланируйте и запустите конвейер.

Инструкции см. в статье [Загрузка данных из хранилища BLOB-объектов Azure в хранилище данных SQL (фабрика данных Azure)][].


## Загрузка из SQL Server
Для загрузки данных из SQL Server в хранилище данных SQL можно использовать службы интеграции, передавать неструктурированные файлы или отправлять диски в корпорацию Майкрософт. Далее в этой статье будут рассмотрены различные процессы загрузки и даны ссылки на соответствующие учебники.

Планирование полной миграции данных из SQL Server в хранилище данных SQL см. в статье [Перенос решения в хранилище данных SQL][].

### Использование служб интеграции (SSIS)
Если вы уже используете пакеты служб интеграции (SSIS) для загрузки в SQL Server, эти пакеты можно обновить таким образом, чтобы SQL Server использовался как источник, а хранилище данных SQL — как конечный пункт. Это делается быстро и легко и подходит, если вы не пытаетесь перенести процесс загрузки для использования данных, которые уже находится в облаке. При этом загрузка осуществляется медленнее, чем при использовании PolyBase, поскольку SSIS не выполняет параллельную загрузку.

Процесс загрузки:

1. Измените пакет служб интеграции таким образом, чтобы он указывал на экземпляр SQL Server как источник и на базу данных хранилища данных SQL как на конечный пункт.
2. Перенесите схему в хранилище данных SQL, если вы это еще не сделали.
3. Измените сопоставление в пакетах, используя только те типы данных, которые поддерживаются хранилищем данных SQL.
3. Спланируйте и запустите пакет.

Инструкции см. в статье [Загрузка данных из SQL Server в хранилище данных SQL Azure (SSIS)][].

### Использование AZCopy (рекомендуется при объеме данных меньше 10 ТБ)
Если объем данных меньше 10 ТБ, можно экспортировать данные из SQL Server в неструктурированные файлы, скопировать их в хранилище BLOB-объектов Azure, а затем загрузить данные в хранилище данных SQL с помощью PolyBase.

Процесс загрузки:

1. Экспортируйте данные из SQL Server в неструктурированные файлы с помощью служебной программы командной строки bcp.
2. Скопируйте данные из неструктурированных файлов в хранилище BLOB-объектов Azure с помощью служебной программы командной строки AZCopy.
3. Загрузите данные в хранилище данных SQL с помощью PolyBase.

Инструкции см. в статье [Загрузка данных из хранилища BLOB-объектов Azure в хранилище данных SQL (PolyBase)][].

### Использование программы bcp
Если данных немного, их можно загрузить непосредственно в хранилище данных SQL с помощью bcp.

Процесс загрузки:
1. Экспортируйте данные из SQL Server в неструктурированные файлы с помощью служебной программы командной строки bcp.
2. Загрузите данные из неструктурированных файлов непосредственно в хранилище данных SQL с помощью bcp.

Инструкции см. в статье [Загрузка данных из SQL Server в хранилище данных SQL Azure (неструктурированные файлы)][].


### Использование импорта и экспорта (рекомендуется при объеме данных меньше 10 ТБ)
Если объем данных превышает 10 ТБ и вы хотите перенести их в Azure, рекомендуем использовать нашу службу доставки дисков [Импорт и экспорт][].

Процесс загрузки:
2. Экспортируйте данные из SQL Server в неструктурированные файлы на переносных дисках с помощью служебной программы командной строки bcp.
3. Перешлите диски в корпорацию Майкрософт.
4. Майкрософт загружает данные в хранилище данных SQL

## Загрузка из HDInsight
Хранилище данных SQL поддерживает загрузку данных из HDInsight через PolyBase. Процесс будет таким же, как при загрузке данных из хранилища BLOB-объектов Azure с использованием PolyBase для подключения к HDInsight и загрузки данных.

### 1\. Использование PolyBase и T-SQL

Процесс загрузки:

2. Отформатируйте данные в формате UTF-8, поскольку в настоящее время PolyBase не поддерживает формат UTF-16.
2. Переместите данные в HDInsight и сохраните их в текстовых файлах, формате ORC или Parquet.
3. Настройте внешние объекты в хранилище данных SQL, определив расположение и формат данных.
4. Выполните команду T-SQL для параллельной загрузки данных в новую таблицу баз данных.

Инструкции см. в статье [Загрузка данных из хранилища BLOB-объектов Azure в хранилище данных SQL (PolyBase)][].

## Рекомендации

Многие из наших партнеров предлагают решения для загрузки. Дополнительные сведения см. в списке [партнеров по разработке решений][].

Если данные поступают из нереляционного источника и их необходимо загрузить в хранилище данных SQL, перед загрузкой их нужно преобразовать в строки и столбцы. Преобразованные данные не обязательно должны храниться в базе данных, их можно хранить в текстовых файлах.

Создание статистики для вновь загруженных данных Хранилище данных SQL Azure пока не поддерживает автоматическое создание или автоматическое обновление статистики. Чтобы добиться максимально высокой производительности запросов, крайне важно сформировать статистические данные для всех столбцов всех таблиц после первой загрузки или после любых значительных изменений в данных. Дополнительные сведения см. в статье [Managing statistics on tables in SQL Data Warehouse][] \(Управление статистикой в таблицах в хранилище данных SQL).


## Дальнейшие действия
Дополнительные советы по разработке см. в статье [Общие сведения о разработке][].

<!--Image references-->

<!--Article references-->
[Загрузка данных из хранилища BLOB-объектов Azure в хранилище данных SQL (PolyBase)]: ./sql-data-warehouse-load-from-azure-blob-storage-with-polybase.md
[Загрузка данных из хранилища BLOB-объектов Azure в хранилище данных SQL (фабрика данных Azure)]: ./sql-data-warehouse-load-from-azure-blob-storage-with-data-factory.md
[Загрузка данных из SQL Server в хранилище данных SQL Azure (SSIS)]: ./sql-data-warehouse-load-from-sql-server-with-integration-services.md
[Загрузка данных из SQL Server в хранилище данных SQL Azure (неструктурированные файлы)]: ./sql-data-warehouse-load-from-sql-server-with-bcp.md
[Load data from SQL Server to Azure SQL Data Warehouse (AZCopy)]: ./sql-data-warehouse-load-from-sql-server-with-azcopy.md

[загрузке примеров баз данных]: ./sql-data-warehouse-load-sample-databases.md
[Перенос решения в хранилище данных SQL]: ./sql-data-warehouse-overview-migrate.md
[партнеров по разработке решений]: ./sql-data-warehouse-partner-business-intelligence.md
[Общие сведения о разработке]: ./sql-data-warehouse-overview-develop.md
[Managing statistics on tables in SQL Data Warehouse]: ./sql-data-warehouse-tables-statistics.md

<!--MSDN references-->

<!--Other Web references-->
[Импорт и экспорт]: https://azure.microsoft.com/documentation/articles/storage-import-export-service/

<!---HONumber=AcomDC_0713_2016-->