<properties
   pageTitle="Пакетные решения и решения HPC в облаке | Microsoft Azure"
   description="Сценарии и решения для пакетных и высокопроизводительных вычислений (вычисления HPC и большие вычисления) в Azure"
   services="batch, virtual-machines, cloud-services"
   documentationCenter=""
   authors="dlepow"
   manager="timlt"
   editor=""/>

<tags
   ms.service="batch"
   ms.devlang="NA"
   ms.topic="get-started-article"
   ms.tgt_pltfrm="NA"
   ms.workload="big-compute"
   ms.date="07/27/2016"
   ms.author="danlep"/>

# Пакетные решения и решения HPC в облаке Azure

Azure предлагает эффективные масштабируемые облачные решения для пакетной обработки и высокопроизводительных вычислений (HPC), которые также называют *большими вычислениями*. Узнайте, что представляют собой большие вычисления и какие службы Azure их поддерживают, или обратитесь непосредственно к [сценариям решений](#scenarios), которые приводятся ниже в этой статье. Эта статья предназначена главным образом для технических специалистов, ИТ-менеджеров и независимых поставщиков программного обеспечения, но поможет познакомиться с этими решениями и другим ИТ-специалистам и разработчикам.

Сегодня перед организациями стоят сложные крупномасштабные вычислительные задачи, включающие техническое проектирование и анализ, отрисовку изображений, комплексное моделирование, моделирование методом Монте-Карло и вычисление финансовых рисков. Azure помогает организациям решать такие задачи, предоставляя необходимые ресурсы, а также возможность масштабирования и планирования. С помощью Azure организации могут:

* создавать гибридные решения, расширяющие локальный вычислительный кластер HPC для передачи пиковых нагрузок в облако;

* запускать рабочие нагрузки вычислительного кластера HPC полностью в Azure;

* использовать управляемые и масштабируемые службы Azure, такие как [пакетная служба Azure](https://azure.microsoft.com/documentation/services/batch/), для запуска ресурсоемких рабочих нагрузок без необходимости развертывания вычислительной инфраструктуры и управления ею.

Несмотря на то, что это выходит за рамки данной статьи, отметим, что Azure также предлагает разработчикам и партнерам полный набор возможностей, вариантов архитектуры и средств разработки для создания настраиваемых крупномасштабных рабочих процессов больших вычислений. Растущая экосистема партнеров готова помочь вам добиться продуктивности рабочих процессов больших вычислений в облаке Azure.


## Пакетные и HPC-вычисления

В отличие от веб- и многих бизнес-приложений пакетные и HPC приложения имеют определенные моменты запуска и завершения и могут выполняться по расписанию или по требованию, иногда в течение нескольких часов или дольше. Большинство из них подразделяются на две основные категории: *параллельные по сути*(иногда они называются "неудобно параллельными", поскольку из-за специфики решаемых задач они обязаны выполняться параллельно на нескольких компьютерах или процессорах) и *тесно связанные*. В следующей таблице приведены дополнительные сведения об этих типах приложений. Некоторые решения Azure лучше подходят для одного или другого типа приложений.

>[AZURE.NOTE] В пакетных и HPC решениях запущенный экземпляр приложения обычно называется *заданием* и каждое задание может подразделяться на *задачи*. А кластеризованные вычислительные ресурсы приложения часто называются *вычислительными узлами*.

Тип | Характеристики | Примеры
------------- | ----------- | ---------------
**Параллельные по сути**<br/><br/>![Параллельные по сути][parallel] |• Логика приложения выполняется на отдельных вычислительных узлах, которые работают независимо друг от друга<br/><br/>• При добавлении вычислительных узлов приложение можно масштабировать и сократить время вычисления<br/><br/>• Приложение состоит из отдельных исполняемых файлов или разделено на несколько служб, вызываемых клиентом (приложение сервис-ориентированной архитектуры) |• Моделирование финансовых рисков<br/><br/>• Отрисовка и обработка изображений<br/><br/>• Кодирование и перекодирование мультимедиа<br/><br/>• Симуляции методом Монте-Карло<br/><br/>• Тестирование программного обеспечения
**Тесно связанные**<br/><br/>![Тесно связанные][coupled] |• Приложениям для взаимодействия и обмена промежуточными результатами необходимы вычислительные узлы<br/><br/>• Вычислительные узлы могут обмениваться данными с помощью интерфейса передачи сообщений (MPI), популярного коммуникационного протокола для параллельных вычислений<br/><br/>• Приложение чувствительно к сетевой задержке и пропускной способности сети<br/><br/>• Производительность приложения может быть улучшена с помощью технологий высокоскоростной сети, таких как InfiniBand и удаленный прямой доступ к памяти (RDMA) |• Моделирование нефтяных и газовых резервуаров<br/><br/>• Техническое проектирование и анализ, например вычислительная гидродинамика<br/><br/>• Физические симуляции, например симуляции автокатастроф и ядерных реакций<br/><br/>• Прогнозирование погоды

### Рекомендации по запуску пакетных и HPC приложений в облаке

В Azure или в гибридную среду (разделяемую несколькими организациями) можно легко перенести многие приложения, предназначенные для запуска на локальных вычислительных кластерах HPC. Однако при этом следует учитывать некоторые ограничения или соображения, включающие


* **Доступность облачных ресурсов** — в зависимости от выбранного типа облачные вычислительные ресурсы могут быть недоступными в течение какого-то времени при выполнении задания. Для обработки возможных ошибок неустойчивых отказов обычно используются сохранение состояния и контроль выполнения. Эти операции критичны при использовании облачных ресурсов.


* **Доступ к данным** — способы доступа к данным, применяемые в кластерах предприятия (например, NFS), могут потребовать выполнения специальной настройки в облаке. Вы также можете попробовать другие способы получения доступа к данным в облаке.

* **Перемещение данных** — для приложений, обрабатывающих большие объемы данных, необходимы стратегии перемещения данных в хранилище облака и стратегии использования вычислительных ресурсов. Для решения этой задачи могут потребоваться такие высокоскоростные распределенные сети, как [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/). Также учитывать законодательные, юридические ограничения на хранение и доступ к этим данным, а также ограничения политик.


* **Лицензирование** — проконсультируйтесь с поставщиками всех коммерческих приложений о лицензировании или иных ограничениях на запуск приложений в облаке. Не все поставщики предлагают лицензирование с оплатой по мере использования. Для вашего решения может потребоваться сервер лицензий в облаке или локальный сервер лицензий.


### Большие вычисления или Большие данные?

Линия раздела между приложениями больших вычислений и больших данных не всегда очевидна, и некоторые приложения могут иметь характеристики и того, и другого. В обоих случаях используются крупномасштабные вычисления, обычно на кластерах компьютеров. Но подходы к решениям и используемые средства могут различаться.

•**Большие вычисления**, как правило, включают приложения, использующие вычислительные ресурсы процессора и память. К ним относятся, например, техническое моделирование, моделирование финансовых рисков и цифровая отрисовка. Инфраструктура решения для больших вычислений может включать в себя компьютеры со специализированными многоядерными процессорами для выполнения "сырых" вычислений и специализированное высокоскоростное сетевое оборудование для подключения компьютеров.

• **Большие данные** решают задачи анализа больших объемов данных, которые не под силу одному компьютеру или СУБД. Примеры включают большие объемы веб-журналов или других данных бизнес-аналитики. Большие данные зависят скорее от емкости диска и производительности операций ввода-вывода, чем от мощности процессора. Существуют также специализированные средства для работы с большими данными (например, Apache Hadoop), которые позволяют управлять кластером и секционировать данные. (Сведения об Azure HDInsight и других решениях Azure Hadoop приведены в статье [Hadoop](https://azure.microsoft.com/solutions/hadoop/).)

## Управление вычислениями и планирование заданий

Выполнение приложений пакетной службы и приложений HPC зачастую включает работу *диспетчера кластеров* и *планировщика заданий*, которые помогают управлять кластеризованными вычислительными ресурсами и выделять их приложениям, запускающим задания. Эти функции могут выполняться отдельными инструментами или одним общим инструментом или службой.

* **Диспетчер кластеров** — развертывает, освобождает вычислительные ресурсы (или вычислительные узлы) и управляет ими. Диспетчер кластеров может автоматизировать установку образов операционных систем и приложений на вычислительных узлах, масштабировать вычислительные ресурсы по требованию и наблюдать за производительностью узлов.

* **Планировщик заданий** — определяет ресурсы (например, ресурсы процессора или оперативной памяти), потребляемые приложением, а также условия запуска приложения. Планировщик заданий поддерживает очередь заданий и распределяет ресурсы на основании назначенных приоритетов и других характеристик.

Средства кластеризации и планирования заданий для кластеров Windows и Linux хорошо мигрируют в Azure. Например, [пакет Microsoft HPC](https://technet.microsoft.com/library/cc514029), бесплатное решение вычислительного кластера для рабочей нагрузки HPC в Windows или Linux от корпорации Майкрософт, предусматривает несколько вариантов выполнения в Azure. Можно также создавать кластеры Linux для запуска таких средств с открытым исходным кодом, как Torque и SLURM. Кроме того, в Azure можно использовать и коммерческие решения, например [TIBCO DataSynapse GridServer](http://www.tibco.com/company/news/releases/2016/tibco-to-accelerate-cloud-adoption-of-banking-and-capital-markets-customers-via-microsoft-collaboration), [IBM Platform Symphony](http://www-01.ibm.com/support/docview.wss?uid=isg3T1023592) и [Univa Grid Engine](http://www.univa.com/products/grid-engine).

Как показано в следующих разделах, службы Azure позволяют также управлять вычислительными ресурсами и планировать задания без использования традиционных средств управления кластером или вместе с ними.


## Сценарии

Рассмотрим три основных сценария для запуска рабочих нагрузок больших вычислений в Azure с использованием существующих кластерных решений HPC, служб Azure или их сочетания. Список доводов в пользу каждого сценария включен, но не является исчерпывающим. Дополнительные сведения о службах Azure, которые можно использовать в своем решении, см. далее в этой статье.

 | Сценарий | Для чего нужен?
------------- | ----------- | ---------------
**Ускорение кластера HPC в Azure**<br/><br/>[![Расширение кластера][burst_cluster]](./media/batch-hpc-solutions/burst_cluster.png) <br/><br/> Подробнее:<br/>• [Ускорение в рабочие экземпляры Azure с помощью пакета HPC](https://technet.microsoft.com/library/gg481749.aspx)<br/><br/>• [Настройка гибридного вычислительного кластера с помощью пакета HPC](../cloud-services/cloud-services-setup-hybrid-hpcpack-cluster.md)<br/><br/>• [Ускорение в пакетную службу Azure с помощью пакета HPC](https://technet.microsoft.com/library/mt612877.aspx)<br/><br/>|• Объединение [пакета Microsoft HPC](https://technet.microsoft.com/library/cc514029) или другого локального кластера с дополнительными ресурсами Azure в гибридном решении.<br/><br/>• Перенос рабочей нагрузки больших вычислений на экземпляры виртуальной машины PaaS (платформа как услуга). На данный момент это может быть только Windows Server.<br/><br/>• Доступ к локальному серверу лицензий или хранилищу данных через вспомогательную виртуальную сеть Azure|• У вас уже есть кластер HPC, и вам нужны дополнительные ресурсы. <br/><br/>• Вы не хотите приобретать и администрировать дополнительную инфраструктуру кластера HPC.<br/><br/>• У вас бывают временные периоды высокой нагрузки или специальные проекты
**Создание кластера HPC полностью в Azure**<br/><br/>[![Кластер в IaaS][iaas_cluster]](./media/batch-hpc-solutions/iaas_cluster.png)<br/><br/>Подробнее:<br/>• [Кластерные решения HPC в Azure](./big-compute-resources.md)<br/><br/>|• Быстрое и согласованное развертывание средств приложений и кластеров в стандартной и настраиваемой инфраструктуре Windows или Linux в качестве виртуальной машины IaaS (инфраструктура как услуга).<br/><br/>• Выполнение различных рабочих нагрузок больших вычислений с помощью решения для планирования заданий по вашему выбору.<br/><br/>• Использование дополнительных служб Azure, включая сети и хранилище, для создания полностью облачных решений. |• Вы не хотите покупать и администрировать дополнительную инфраструктуру кластера HPC.<br/><br/>• У вас бывают периоды высокой нагрузки или специальные проекты.<br/><br/>• Вам временно нужен дополнительный кластер, но вы не готовы инвестировать средства в компьютеры и пространство для его развертывания.<br/><br/>• Вы хотите уменьшить нагрузку на ресурсоемкое приложение, чтобы оно полностью работало в облаке как услуга.
**Развертывание параллельного приложения в Azure**<br/><br/>[![Пакетная служба Azure][batch_proc]](./media/batch-hpc-solutions/batch_proc.png)<br/><br/>Подробнее:<br/>• [Основные сведения о пакетной службе Azure](./batch-technical-overview.md)<br/><br/>• [Начало работы с библиотекой пакетной службы Azure для .NET](./batch-dotnet-get-started.md)|• Использование [пакетной службы Azure](https://azure.microsoft.com/documentation/services/batch/) для горизонтального масштабирования различных рабочих нагрузок больших вычислений и обеспечения их выполнения в пулах виртуальных машин Windows или Linux.<br/><br/>• Использование службы платформы Azure для управления развертыванием и автоматического масштабирования виртуальных машин, планирования заданий, аварийного восстановления, перемещения данных, управления зависимостями и развертывания приложений.|• Вы хотите сосредоточиться на работе своих приложений, не отвлекаясь на управление вычислительными ресурсами или планировщиком заданий.<br/><br/>• Вы хотите уменьшить нагрузку на ресурсоемкое приложение, сделав так, чтобы оно работало в облаке как услуга.<br/><br/>• Вам требуется автоматическое масштабирование вычислительных ресурсов в соответствии с вычислительной нагрузкой


## Службы Azure для Больших вычислений

Ниже представлены подробные сведения о вычислительных службах, службах для обработки данных, сетевых и сопутствующих службах, которые можно использовать в рабочих процессах и решениях для больших вычислений. Более полные сведения см. в [документации](https://azure.microsoft.com/documentation/) по службам Azure. [Сценарии](#scenarios), описанные выше в этой статье, демонстрируют только некоторые способы управления этими службами.

>[AZURE.NOTE] Azure регулярно вводит новые службы, которые могут пригодиться в вашем сценарии. Если у вас есть вопросы, свяжитесь с [партнером Azure](https://pinpoint.microsoft.com/ru-RU/search?keyword=azure) или отправьте свой вопрос по электронной почте *bigcompute@microsoft.com*.

### Службы вычислений

Службы вычислений Azure составляют основу решения больших вычислений. Разные службы вычислений подходят для разных сценариев. На базовом уровне эти службы предлагают различные режимы запуска приложений на виртуальных вычислительных экземплярах Azure с использованием технологии Windows Server Hyper-V. Эти экземпляры могут запускать стандартные и пользовательские версии операционных систем и средств Linux и Windows. Azure позволяет выбрать [разные размеры экземпляров](../virtual-machines/virtual-machines-windows-sizes.md) с различными конфигурациями ядер ЦП, памяти, емкости диска и других характеристик. Вы можете изменять размеры системы (от нескольких экземпляров до нескольких тысяч ядер) в соответствии со своими нуждами.

>[AZURE.NOTE] Для повышения производительности и масштабируемости рабочих нагрузок HPC, включая параллельные приложения MPI, которым требуются малая задержка и высокая пропускная способность сети, можно воспользоваться преимуществами экземпляров Azure с интенсивным использованием вычислительных ресурсов. Дополнительные сведения см. в статье [Сведения об экземплярах A8, A9, A10 и A11 с большим объемом вычислений](../virtual-machines/virtual-machines-windows-a8-a9-a10-a11-specs.md).

служба | Описание
------------- | -----------
**[Виртуальные машины](https://azure.microsoft.com/documentation/services/virtual-machines/)**<br/><br/> |• Предоставляют вычислительную инфраструктуру как услугу (IaaS) с использованием технологии Microsoft Hyper-V.<br/><br/>• Позволяют гибко развертывать в постоянном облаке компьютеры из стандартных образов Windows Server или Linux, приобретенных в [Azure Marketplace](https://azure.microsoft.com/marketplace/), либо образов и дисков данных, предоставленных вами, и управлять такими компьютерами.<br/><br/>• Могут развертываться и управляться в виде [наборов масштабирования виртуальных машин](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/) для создания крупномасштабных служб из идентичных виртуальных машин с автомасштабированием для автоматического увеличения или уменьшения емкости.<br/><br/>• Запускают средства и приложения локального вычислительного кластера полностью в облаке<br/><br/>
**[Облачные службы](https://azure.microsoft.com/documentation/services/cloud-services/)**<br/><br/> |• Могут запускать приложения больших вычислений в экземплярах рабочей роли, которые представляют собой виртуальные машины под управлением Windows Server и полностью управляются Azure.<br/><br/>• Позволяют запускать масштабируемые, надежные приложения с низкими административными издержками по модели «Платформа как услуга» (PaaS).<br/><br/>• Могут потребовать дополнительные средства или разработку для интеграции с локальными кластерами HPC.
**[Пакетная служба](https://azure.microsoft.com/documentation/services/batch/)**<br/><br/> |• Запускает крупномасштабные параллельные и пакетные рабочие нагрузки в полностью управляемой службе.<br/><br/>• Предоставляет средства планирования заданий и автоматического масштабирования управляемого пула виртуальных машин.<br/><br/>• Позволяет разработчикам разрабатывать и запускать приложения как службы или адаптировать для облака имеющиеся приложения<br/>

### Службы хранилища

Решение Больших вычислений обычно получает набор входных данных и формирует набор результатов. Некоторые службы хранилища Azure, используемые в решениях больших вычислений, включают следующее:

* [Хранилище больших двоичных объектов, таблиц и очередей](https://azure.microsoft.com/documentation/services/storage/) — управление большими объемами неструктурированных данных, данных NoSQL и сообщений рабочих процессов и коммуникационных сообщений соответственно. Например, в хранилище BLOB-объектов можно хранить большие наборы технических данных либо входные изображения или файлы мультимедиа ваших процессов. Очереди можно использовать для асинхронного обмена данными в решении. См. статью [Знакомство со службой хранилища Microsoft Azure](../storage/storage-introduction.md).

* [Хранилище файлов Azure](https://azure.microsoft.com/services/storage/files/) — организует общий доступ к файлам и данным в Azure с использованием стандартного протокола SMB, который необходим для некоторых кластерных решений HPC.

* [Data Lake Store](https://azure.microsoft.com/services/data-lake-store/) — предоставляет гипермасштабируемую распределенную файловую систему Apache Hadoop для облака, используемую для пакетной и интерактивной аналитики в реальном времени.

### Анализ данных и служб

Некоторые сценарии Больших вычислений включают большие потоки данных или генерируют данные для последующей обработки или анализа. Azure предлагает несколько служб данных и аналитики. Эти службы перечислены ниже.

* [Фабрика данных](https://azure.microsoft.com/documentation/services/data-factory/) — создает управляемые данными рабочие процессы (конвейеры), которые комбинируют, статистически обрабатывают и преобразуют данные, полученные из локальных, облачных и интернет-хранилищ.

* [База данных SQL](https://azure.microsoft.com/documentation/services/sql-database/) — обеспечивает ключевые возможности системы управления реляционной базой данных Microsoft SQL Server в управляемой службе.

* [HDInsight](https://azure.microsoft.com/documentation/services/hdinsight/) — развертывает и подготавливает кластеры Apache Hadoop под управлением Windows Server или Linux в облаке для управления, анализа и формирования отчетов о больших данных.

* [Машинное обучение](https://azure.microsoft.com/documentation/services/machine-learning/) — помогает создавать и тестировать решения прогнозной аналитики, а также работать с ними и управлять ими в полностью управляемой службе.

### Дополнительные службы

Для подключения к ресурсам в локальной или в других средах вашему решению больших вычислений могут потребоваться другие службы Azure. Примеры приведены ниже.

* [Виртуальная сеть](https://azure.microsoft.com/documentation/services/virtual-network/) — создает логически изолированный раздел в Azure для подключения ресурсов Azure друг к другу или локальному центру обработки данных. С помощью распределенной виртуальной сети приложения для больших вычислений могут обращаться к локальным данным, службам Active Directory и серверам лицензирования.

* [ExpressRoute](https://azure.microsoft.com/documentation/services/expressroute/) — создает частные подключения между центрами обработки данных Майкрософт и инфраструктурой в рамках локально или совместно расположенной среды. Подключения ExpressRoute обеспечивают более безопасный, надежный и быстрый обмен данными, а также меньшие задержки в сравнении с обычными интернет-подключениями.

* [Служебная шина](https://azure.microsoft.com/documentation/services/service-bus/) — предоставляет несколько механизмов коммуникации или обмена данными для приложений, независимо от того, расположены ли они в Azure, на другой облачной платформе или в центре обработки данных.

## Дальнейшие действия

* Техническое руководство по созданию решений см. в статье [Большие вычисления в Azure: технические ресурсы для пакетных и высокопроизводительных вычислений (HPC)](big-compute-resources.md).

* Обсудите параметры Azure с партнерами, включая Cycle Computing и UberCloud.

* Узнайте о решениях Azure для больших вычислений, предлагаемых компаниями [Towers Watson](https://customers.microsoft.com/Pages/CustomerStory.aspx?recid=18222), [Altair](https://azure.microsoft.com/blog/availability-of-altair-radioss-rdma-on-microsoft-azure/), [ANSYS](https://azure.microsoft.com/blog/ansys-cfd-and-microsoft-azure-perform-the-best-hpc-scalability-in-the-cloud/) и [d3VIEW](https://customers.microsoft.com/Pages/CustomerStory.aspx?recid=22088).

* Последние объявления см. в [блоге группы Microsoft HPC и Пакетной службы](http://blogs.technet.com/b/windowshpc/), а также в [блоге Azure](https://azure.microsoft.com/blog/tag/hpc/).

<!--Image references-->
[parallel]: ./media/batch-hpc-solutions/parallel.png
[coupled]: ./media/batch-hpc-solutions/coupled.png
[iaas_cluster]: ./media/batch-hpc-solutions/iaas_cluster.png
[burst_cluster]: ./media/batch-hpc-solutions/burst_cluster.png
[batch_proc]: ./media/batch-hpc-solutions/batch_proc.png

<!---HONumber=AcomDC_0928_2016-->